�����Ӧ��
COMPUTER APPLICATIONS
1999�� ��19�� ��6�� Vol.19 No.6 1999



����Web.sql��Web���ݿ�ӿڳ���������
Ф��ˮ�������֡������
����ժ��Ҫ��������ϸ�ؽ�����Web.sql���ݿ�ӿڳ��������������˼�롢�����ص㡢ʵ�ַ�����Ӧ�á���ΪWeb������Ա�ṩ��һ��ͨ��Web����������Sybase���ݿ��Ӧ�ó��򿪷�������
�����ؼ��ʡ�Web���ݿ�ӿڣ�WWW ��Intranet�� Perl����
WEB DATABASE INTERFACE
PROGRAM GENERATOR BASED ON WEB.SQL
Xiao Zongshui��Chai Qiaolin��Shan Yufeng
Netware Center, Sandong University of Industry, Sandong.Jinan 250061
����Abstract��This paper introduced Web database interface program generatorbased on Web.sql and its main idea , function, features and application,it provides developers with a new kind of developing method and tool ofWeb database interface program.
����Keywords��Web database interface��WWW��Intranet��Perl
1��ǰ��
����ͨ��Web.sql�ӿڿ��Խ�Web��������Sybase���ݿ������͸���ؼ�����һ��Ϊ��̬����Webҳ�������ݿ���Ϣ��1���ṩ��һ�ּ�㷽����ͨ������Web.sql����Web���ݿ�Ӧ������Ŀ�����Ҫ�߱�Perl��������;��飬��Ҫ��������Web.sql���й�֪ʶ�����һ�㿪����Ա��һ�����Ѷȡ����ڻ���Web.sql��Web���ݿ�Ӧ�ó����У����������̴������ƣ�������Ա���ò���д����ظ��ĳ�����롣���⣬������FORM����ʽ������������ݵ�¼����ύʱ�����ڴ���FORM���ݵķ�������Web.sql����ͨ���������Ӧ��FORM��ͬһ��HTML�ļ��У���FORM�и��ؼ��Ĳ���������Ҫ��Web.sql�������ã����Ҫ���ڲ�ͬ�ļ�֮���໥���գ�����̴����϶಻�㡣���Ľ��ܵĻ���Web.sql��Web���ݿ�ӿڷ��ż���Ӧ�ĳ����������������һ�ֽ����������ķ�����
2�����˼�������ݿ�ӿ���������
����ͨ����Web.sql�ӿڼ���Web���ݿ�Ӧ�ó����2,3�ݽ��з������о������ǽ���Щ���õ�Ӧ�ó���Σ��罫ϵͳע�ᡢSQL�����ύ��ȡ��SQL���Ľ����FORM�ύ�¼�����Ͳ˵����ܵȶ���Ϊ���ֽӿڷ��ţ�������뵽HTML�ĵ����ʵ���λ�ã�����������Ӧ�ĳ������������Ժ�����Щ���ŵ�HTML�ĵ����д�������ת��Ϊ��Ӧ���ܵ�Perl���򣬴Ӷ�ʵ��Web��������Sybase���ݿ�ķ��ʡ�ͼ1����������Ӧ��ʾ�⡣

ͼ1��ϵͳ�ṹ
2.1���ӿڷ��Ŷ���
������1�� <%DATABASE��db%>
����ָ��������ʹ�õ����ݿ⣬dbΪ���ݿ�����
������2�� <%SQL��sql��sta%>
���������ݿ����������SQL��䣬����sql��sta��Ҫ���͵���䡣
������3�� <%RESULT%>......<%/RESULT%>
����<%RESULT%>��<%RESULT%>����һ��ѭ������������͵���select��䣬���д����صĲ�ѯ�����
������4�� $col��n��
�������ò�ѯ���������n��select����е��ֶ�˳���Ӧ��n��0��ʼ��
�������磺select name��sex��age from tab��man
$col��0�ݣ���>name
$col��1�ݣ���>sex
$col��2�ݣ���>age
������5�� <%ACTION��form��action��name %>......<%/ACTION%>
����FORM��������������ύ�󣬷������˵����ݴ�����̣����Ӧ�ĳ�����뵥������һ���¼���������ļ�������form��action��nameӦ��FORM��action��url��ͬ��
������6�� <%GOTO��url%>
�����ض���urlָ����Webҳ��
������7�� <%REFRESH��n��url%>
���������������ʱ����urlָ����Webҳ������nΪʱ��������λ���롣���urlָ�����ǵ�ǰҳ���������ҳ��ʱˢ�¡�
������8�� <%LOGIN%>......<%/LOGIN%>
����ִ���û�ע�Ṧ�ܡ�ֻ���û�ע��ɹ����ִ�иô���ͨ����<%LOGIN%>��������<%ACTION%>���С�
������9�� <%RIGHT��right��name %>....<%/RIGHT%>
��������û��Ƿ�߱�ĳ��Ȩ�ޣ��߱�right��nameȨ�޵��û�����ִ�����еĳ���顣
������10�� <%LOGIN CHECK%>....<%/LOGIN CHECK%>
��������û��Ƿ�ע�ᣬ��ֹ�û�ֱ������URLִ�����г���
������11�� <%MENU��menu��item %>....<%/MENU%>
�������������̬CGI������򣬸����͵ĳ���ִ��ʱ��ͨ��URL�Ĳ����ṩ�˵�ѡ����ݲ�ͬ��menu��item��ִ�ж�Ӧ��MENU�顣
2.2��ͨ���ĳ���ṹ
����<%DATABASE��db%>
<LOGIN CHECK%>
<RIGHT��right��name%>
����HTML����
<%MENU��menu��item%>
����HTML����
<%SQL��sql��sta%>
<%RESULT%>
����HTML��ʽ������
<%/RESULT%>
<%/MENU%>
<%/RIGHT%>
<%/LOGIN CHECK%>
<%ACTION��form��action��name%>
<%SQL��sql��sta%>
<%GOTO��url%>
<%/ACTION%>
3�����򿪷����̺ͳ�����������ʵ��
3.1���ӿڷ��ų��򿪷�����
������1�� ��Frontpage�б༭HTML�ĵ���Frontpage�ǽ�Ϊ���õĿ��ӻ�HTML�༭�������������е�EDIT:Database Column Value��������ӿڷ��ţ���ֱ������ͨ���ı��༭�������룻
������2�� ��HTML�е��ʵ���λ�ò���ӿڷ��ţ��õ������ļ��ԡ�.htx��Ϊ��չ����
������3�� �������ӿڷ��ŵ�.htx�ĵ�ת��ΪPerl����
������4�� �������ɵ�Perl����
3.2��������������������
������1�� �������������ű�
����@symbol=��"���ӿڷ���", ... ...����
�����ڽӿڷ������漰���ɱ������λ����$para���档
������2�� �ӿڷ��Ŷ�Ӧ�Ĵ�����
����@code=��qq!.....
��.....!,
qq!.....
��.....!,
��......����
����@symbol��@code��Ԫ��һһ��Ӧ��
������3�� ɨ��.htx�ļ����������Ľӿڷ����ö�Ӧ�Ĵ�����滻�����������еĿɱ�������뵽��������Ӧλ�ã���������HTML���룬��perl��print��乹�죬��ʽ���£�
����print qq!HTML����!;
������4�� ��.htx�ļ��е�<%ACTION: form��action��name%>���ڵĴ��룬��������һperl�����ļ����ļ���Ϊform��action��name�����ݡ�
3.3�����ݿ�ӿڳ��������������
������1�� ����������(compiler.pl)��ͨ�����øó��򽫽ӿ���������(*.htx)ת��Ϊperl����(*.pl)��
������2�� ��������Ի���(wdtool.htm)���û����ṩһ������������Ľ���ʽ���档�û���������ӿ����������ļ����ͽ�Ҫ���ɵ�perl�����ļ�������unit_test.htx��unit_test.pl��Ȼ�����ύ���������˵�compiler.pl�����ӿ���������unit_test.htxת��Ϊ��Ӧ��perl����unit_test.pl�������û����Բ���һ�����ɵ�perl�����ִ�������
������3�� ���������(gen��unit_test��view.pl):���ļ����ڲ������ɵ�perl�����ִ�������
������4�� ����Դ��鿴��(viewsrc.hts)�����ļ����ڲ鿴���ɵ�perl�����Դ���롣
������5�� �������ߵ�����(wd.pl):ͨ�����øó�����ɶԽӿ����������ת���͵��ԡ��������������ַ����ֱ������ӿ�����������ļ������е��ԣ���ʽΪ:��.../wd.pl?htx=unit_test.htx����
3.4�����л���
����������5������ļ����Ƶ�Web�ĵ�Ŀ¼�У�ͨ����Ҫ�����ĳ����ĵ�ͬ��һ��Ŀ¼�¡�Web������������IIS��Netscape Enterprise Web Server��
4���������������ص�
4.1����ȫ��
���������Ե���Ϣ������internet/intranet�����һ����Ҫ���ԣ��������ִ�����������Դ�İ�ȫ�����⡣WWW��internet/intranet��������Ҫ�ķ���֮һ�����,Webվ��İ�ȫ���ر������ݿ�İ�ȫ��Ϊҵ��ǳ����ӵ��о����⡣��ˣ���Web���ݿ�ӿ����������﷨��ͨ�������������Է���ʵ����Web���ݿ�Ӧ�ó���İ�ȫ�ԡ���<%LOGIN CHECK%>��<%login%>��<RIGHT:right��name%>�ȣ�����<LOGIN CHECK%> �Ĺ�����ͨ���˶Կͻ��˻�����IP��ַ��������û�������û�ע����Ϣ����������������Է��ŵ�ʹ�ã���֤�û��ĺϷ����Լ����ʵ�Ȩ�޵ȣ�ֻ��ͨ���Ϸ���֤������һ��Ȩ�޵��û����ɷ���Webҳ������һ���̶��Ͻ����Web���ݿ�Ӧ��ϵͳ�еİ�ȫ����,��Ч�Ķ�ϵͳ���б�����
4.2�������¼������ı�̷���
����FORM�����û����԰��Լ�����Ϣ�ύ��Web��������Ҳ�ɽ��ܴ�Web������������������Ϣ�����޸ģ�ʹ�ͻ��˺ͷ�����֮��ʵ���˽���ʽ�ķ��ʣ�����õ��˹㷺��Ӧ�ã�����΢��˾��FrontpageΪ�����Ա�ṩ��һ�����ӻ��Ŀ����������ܷ���Ĵ����Ͷ���FORM�����Ƕ�����FORM�ύ�����ݵĴ�����Ҫ�ɷ������˵�CGI��������ɣ���FORM��Action��ָ����������CGI���������ĳ�ֱ�����Ա�д�Ķ����ĳ����ļ����ڽӿ��������������У�ͨ������<%ACTION%>�ӿڷ��ţ�ʹ������Ա����ͬһ��HTML�ĵ��мȿ��Զ���FORM��ͬʱҲ������<%ACTION%>�����ö���Ľӿڷ��ű�дFORM���ݴ�����򡣰�FORM�����ݵ��ύ��Ϊһ���¼������¼�����<%ACTION%>���г����ִ�С�
4.3��ʵ����
������������ʹWeb.sql���û���Ϊ͸�����û�ֻ��������Frontpage��Web���������б���HTML�ĵ�������HTML�ĵ����ʵ���λ�ò���ӿڷ��ţ����������Զ���ɽӿ���������Perl�����ת������Բ���Ϥperl���Ժ�Web.sql���û����򲻱�ר��ѧϰ��Щ���֪ʶ��ֻ�迪�����������յĽӿڳ��򣬾Ϳ������Web���ݿ�Ӧ�ó���Ŀ������񡣶�����Ϥperl���Ժ�Web.sql�Ŀ�����Ա������˳��򿪷����̡�
���߼�飺Ф��ˮ��˶ʿ����ʦ����Ҫ�о�����������̻��������ݿ⼼����Intranet������
�����֡������ڡ���Ҫ�о����򣺼�������缰�����缼����
����塡˶ʿ����ʦ����Ҫ�о����������ý��Ӧ�á�
���ߵ�λ��ɽ����ҵ��ѧ�������ġ�ɽ��.���ϣ�250061��
�ο�����
��1�ݡ�Nguyen T, V. Srinivasan. Accessing relational database from the World Wide Web. Proceeding of the 1996 ACM SIGMOD��Canada��1996,6:529-539
��2�ݡ����κ�,��. WWW�����ݿ������.������о��뷢չ��1997;(8)
��3�ݡ�������. Web���ݿ⼼����չ. �й�������û�, 1997;(10)
�ո�����:1999-01-11
