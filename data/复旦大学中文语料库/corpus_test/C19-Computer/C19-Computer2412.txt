������о��뷢չ
JOURNAL OF COMPUTER RESEARCH AND DEVELOPMENT
1999�ꡡ��36����11�ڡ�Vol.36��No.11��1999



���Ŵ��㷨�����Ԫ������
�⡡�ơ�������
ժ��Ҫ���������ķ�����һ���Ż��Ĺ��̣��Ŵ��㷨��ģ����Ȼ������ͨ��ȫ�������㷨�����н��Ŵ��㷨Ӧ�õ������Ż�������������˲����Ŵ��㷨����Ԫ�������ķ�Ҷ����Ȩֵʸ�������������Ԫ�������ķ���.���������Ŵ��㷨�����ۺ�������ͱ��뷽�����ص�˵������ζ��Ŵ��㷨���иĽ�������㷨Ч�ʣ�Ȼ�������Ӱ���Ԫ��������������ʵ����أ�����ʵ����֤�÷�������Ķ�Ԫ������������������кܸߵı�ʶ��.
�ؼ��ʣ��Ŵ��㷨����Ԫ��������Ȩֵʸ��
��ͼ������ţ�TP301��TP18
CONSTRUCTING BINARY DECISION TREES BY
USING GENETIC ALGORITHM
WU Fei and HUANG Ti-Yun
(Management School of Harbin Institute of Technology, Harbin 150001)
Abstract��Decision tree is an optimization method. By simulating the nature evolution, genetic algorithm becomes a kind of general-purpose global search algorithm. An approach to construct and optimize decision tree based on genetic algorithm is discussed in the paper here. A genetic algorithm is employed at each nonterminal node of the binary tree to search for weight vector. To achieve high performance, its fitness function and encoding method are discussed in detail, and in particular, much emphasis is put on its operator evolution. The effects of the misclassification rate of the binary tree are discussed and the experiment results show that the binary decision tree constructed based on genetic algorithmcan classify sample-set accurately.
Key words��genetic algorithm, binary decision tree, eight vector
1��������
�����Ŵ��㷨��һ�ֻ�������ѧ����ԭ��������㷨��1�ݣ���ģ�����ĵ��Ŵ�ѡ�����Ȼ��̭�ļ���ģ�ͣ�ͨ������������ʹȺ�岻���Ż��������ҵ����Ž��׼���Ž�.��Ϊһ����Ч��ȫ�ֲ����Ż��������ߣ��Ŵ��㷨���м򵥡�ͨ�á�³����ǿ�����ڲ��д�����ص㣬����ڹ�ũҵ���������Ρ���ѧ���X�ȷ���ȡ���˹㷺��Ӧ��.
��������ϵͳ���Ŵ��㷨���X��һ����֧����������һ�ֽṹ�򵥡�����Ч�ʸߵķ�������2��.Ŀǰ�����˲����Ŵ��㷨�Ծ������ṹ���㣬ֱ�ӹ���������ķ�����3�ݣ���û���漰���������ľ��ߺ���ѧϰ.������������Ŵ��㷨ѵ�����������Ծ��ߺ��������������Ԫ�������ķ���.
2�����ڶ�Ԫ���������Ŵ��㷨���
������Ԫ�����������ս�㣨Ҷ�ӽ�㣩�ͷ��ս�㣬�����ս���ʾ�����ԣ����ս��������ߺ���������������.�ھ������ķ��ս���������ֵ�ıȽϲ���������ֵ�Ľ���жϴӸý�����µķ�֧��������ս�����Ӧ������������ֵ�����ԣ�4��.
�����Ŵ��㷨�ھ��������������У�Ҫȷ��Ŀ������ۺ����ͱ����ı�����ƣ��Լ��Ŵ��㷨�Ļ���������ѡ�񡢽���ͱ����ʵ�ַ���.�����ص����۶�Ԫ�����������ۺ�����������Ƽ����桢��������ĸĽ�.
2.1���Ŵ��㷨�����ۺ�������
�������ۺ������Ŵ��㷨�����Ӧ�������Ψһ�ӿڣ�����Ⱥ�и������ӵ�һ��������ӳ�����Ĺ���ֱ��Ӱ����������Ч��.
������Ԫ�������Ĵ�������������۾���������Ҫ��׼.��xt={x1,x2,��,xNt}Ϊ����������н��t��ѵ������������xt=x1t��x2t��xct,c���������Ŀ��xit����xt���������i����������.
��������1.����xt�Ĵ�����Ϊ���С�#������������������Ŀ�Ĵ�С.
������xt����������ͬһ�������ʱ��i(xt)=0.����t��Ȩֵʸ��Ϊw���佫xt��Ϊ������xtL(w)��������xtR(w)������:
xtL(w)={x|x��xt������wTx<0}��
xtR(w)={x|x��xt������wTx>0}.
��������ȡ�ָ��Ĵ�����i��(xt,w)Ϊ���xtL(w)��xtR(w)�����ʵļ�Ȩƽ��ֵ.
��������2.�����ָ��Ĵ�����.
i��(xt,w)=p(xtL(w)|xt)i(xtL(w))+p(xtR(w)|xt)i(xtR(w))��
���У�

���������ʵļ�������i(xt,w)=i(xt)-i��(xt,w)������ʾ���t�������ָ�ǰ��Ĵ����ʼ�����������ѡ��i(xt,w)Ϊ���ۺ���������ѡ����õľ��ߺ�����ʹ�����ʵļ�������󣬼���f(y)=��ixt,w).
2.2���Ŵ����ӵĸĽ�
2.2.1���������ӵĸĽ�
����������ָ��������������Ĳ��ֽṹ�����滻����������¸���Ĳ�������GA��ȡ���������������Ҫ�ֶ�.�������������һ���ĸ���Pc����������ʣ�����Կ��������ѡȡ����������е�.�����λ��Ҳ�����ȷ����.�������Pc��ֵһ��ȡ�úܴ���0.6��0.9֮��.
������򵥵Ľ��������ǵ��㽻�棬�������������õĲ�����λ���ϳ��������õ��㽻�棬λ���Ľṹ�ı��С������������Ϣ�����룬��������Ч�ʽ���.Ϊ�����������㽻�棬����Ⱦɫ�������ѡȡ���㣬Ȼ�󽻻������е�һ�λ�������һ����˵�����ڵ��㽻��.���ָĽ�ʹ�ý��������Ч��������ÿ��������λ���ϣ���ַ��ӽ��������������ͬʱ�����˲���λ���ƻ����󡢻����λ���ı���С�Ĳ���������ĳ���.ʵ��������Ľ���Ľ�������ʹ����Ч�ʵõ����������.
2.2.2���������ӵĸĽ�
���������ǰ�һ���ı������Pm��λ����ĳһλ��ĳ��λ��1��Ϊ0��0��Ϊ1.����������������Ŵ��㷨����Ч�ԣ����Ƿ�ֹ�㷨����Ĵ�ʩ.
����ʵ��������Ŵ��㷨�ܽϿ���������ֲ����Ž⣬���Ӿֲ����Ž�������ȫ�����Ž����軨�ѽϳ�ʱ��.Ϊ���������Ч�ʣ���߽�ľ��ȣ����Ŵ��㷨�������ֲ����Ž�ʱ����������ؿ���ʹ����λ����ĩ��λ�������Ҫ�ļ�λ���������5�ݣ����൱�ڸ�������ֵ���ӻ������һ��С�Ĳ������Ӷ��п����Խ�С�Ĵ����ҵ����������Ž�.
��������Ⱥ�ĸ���Ϊn�����жԱ�������Ķ����Ϊ�����ࣺһ������Ӧֵ�ϸߵ�m�����壬����m���������ʱ���������������Ķ�̬���Ʊ���λ�õķ�������������n-m���������ʱ����Ȼ�������ѡȡ����λ�õķ���.����������Ӧֵ�ߵĸ��壬���ö�̬���Ʊ���λ�õķ����������㷨���������Ž���������������Ӧֵ�͵ĸ��壬�������ѡȡ����λ�õķ�����֤���㷨��ȫ��������������֤���㷨����Ч��.��̬���Ʊ���λ�õķ���ʵ�����£�
������g������������еķ��ܴ�����g*��ʾ���Ž��һ�β���ʱ�ķ��ܴ���,��������G��bitLengthΪ�����Ʊ�ʾ�ĸ���ı��볤��.
bit��int(((g-g*)/G)��bitLength/2)+1;
bit1��int(rand()��(bit-1)+1).
������g-g*������ʱ��bit��bitLength/2�仯��1������λ��bit1��ȡֵ�ڣ�bit��1��֮��.
2.2.3����̬����������ʡ��������
�����ڼ��Ŵ��㷨�У�����Pc��PmȡΪ�㶨ֵ��������ڸ��ӵĶ�����Ż�����ʱ��Ч�ʲ��ߣ����Ҵ��ڡ����족�Ŀ�����.Ϊ�����Ч�ʺͿ��ٻ�����Ž⣬���и��ݸ������Ӧ��ֵ��̬�ظı�Pc��Pm.��Ⱥ��������ֲ����Ž������ʱ������Ӧ�����Pc��Pm����Ⱥ���ڽ�ռ䷢ɢʱ���ͽ���Pc��Pm.���ң�������Ӧֵ�ߵĸ��壬��Ӧ�ڽϵ͵�Pc��Pm��ʹ�ý���Ա���������һ������������Ӧֵ�ϵ͵ĸ��壬��Ӧ�ڽϸߵ�Pc��Pm��ʹ�ýⱻ��̭��.������������Ⱥ��Ķ����ԣ��ֱ�֤���Ŵ��㷨�������ԣ���Ч��������Ŵ��㷨���Ż�����.
������̬�����������Pc�Ĺ�ʽΪ

���У�fmaxΪ��ǰ��Ⱥ������Ӧ��ֵ��favgΪȺ���ƽ����Ӧ��ֵ��f��Ϊ����������������нϴ����Ӧ��ֵ��k1��k2Ϊ��0��1��֮�����.
������̬�����������Pm�Ĺ�ʽ��ͬ.
2.3���Ŵ��㷨�ı��뷽��
�������뷽�����Ŵ��㷨�Ĺؼ����⣬��ϵ���ܷ���������������к�������Ч������.�Ŵ��㷨�ı��뷽����Ҫ�����֣�һ���Ƕ����Ʊ��룬��һ���Ǹ���������.�����Ʊ������Ŵ��㷨�г����ı��뼼���������ŵ��ǣ����ײ����Ͳ��������������״��������κ����ⶼ�����ö����Ʊ��룬���Ƕ����Ʊ���Ҳ����һЩȱ�㣺�����Ǳ�ʾ�������㷨Ч��֮���ì�ܣ���Σ������Ʊ�����Ŵ��㷨�ڲ��������У���Ҫ���ϵض��봮�������룬�������㷨�ļ��������������㷨��Ч��.����������ı�ʾ���������ڼ������ֻ�ɼ�����ֳ����������������������ƣ�������зǳ��ߵı�ʾ����.���⣬�����ʾ�ܹ���ʾ�ǳ�������򣬲������㷨���������в���Ҫ��������ת����������㷨��Ч��.���ǣ��������Ҳ��������������������������ȱ��.
���������Ʊ����ʮ���Ʊ�����ڸ��Ե�����.���в��õ��Ƕ����Ʊ���ķ���������Ϊ�����Ʊ���Ļ�����������Ҷ�Ȩֵʸ��w=(w1,w2,��wn)�е�ÿ��ϵ��wi��i=(1,2,��n),��Ӧһ��20λ���Ķ����ƴ�Ai������wi�ı�ʾ���ȴﵽ10-6����������������Ҫ.��Ai������һ�����γɶ�Ӧw�Ķ����ƴ�A,A=A1A2��An.��T�����Ȩʸ��w����Ӧ�Ķ����ƴ���A��������A=T(w),w=T��1(A).
3��Ȩֵʸ�������
�����Ŵ��㷨����Ԫ����������Ȩֵʸ��������ǰ�᣺
������1������һ����ʼ��Ⱥ����ʼ��Ⱥһ��Ϊ���������������������ɻ���ȱ��.Ϊ��ʹ�����ĳ�ʼ��Ⱥ���ȵطֲ��ڽ�ռ��У����г�ʼ��Ĳ����涨���£�
��������x1��x2Ϊ���t���������Բ�ͬ���������xi=(xi1,xi2,��xin,1)T��i=1,2��Ȩֵʸ��w=(x21-����w�������Ա�׼��������ʹȨֵʸ����ÿ��ϵ��wi��ֵ��0��1֮�䣬�����㷨�ܹ�������ҵ�����Ⱥ�����ڵ����򣬼ӿ���������ٶȣ�����������㷨��Ч��.
������2����ֹ�������ж�.���й涨Ϊ����һ���ĺ��������Ȩֵʸ�������Žⲻ�����仯����ֹͣ.
�����Ŵ��㷨�������Ȩֵʸ�����㷨���£�
��������1.����һ����ʼ��Ⱥp={A1,A2,��An},A*Ϊ��ǰ��Ⱥ�е����Ž⣬f*=f(A*)��g*=g=0��g������������еķ��ܴ�����g*��ʾ���Ž��һ�β���ʱ�ķ��ܴ�����n�����ﵱǰ������������.
��������2.�Ե�ǰ��Ⱥp�е�ÿһ���������Ӧ��ֵ��f(A)=��i(p,T��1(A)).
��������3.��ʼ���⽻���M�ͺ��O��
������M��?
������O��?
������g=g+1
��������4.����
������for i=1 to n do
�������ӵ�ǰ��Ⱥp���ö���ѡ��ķ���ѡ��һ������A��
������M=M��A.
��������5.����
������fori=1ton/2do
����������شӽ����M��ѡ�����A���A�壬���ݸ������Ӧֵ�����㶯̬�������Pc�������ս������Pc���н��棬
������M=M-{A��,A��}
������O=O��{A��,A�尴�ո���Pc����ĺ��}.
��������6.����
��������O={Ao1,Ao2,��Aon}��mΪС��n��ĳһ������
�������ڵ�ǰ��Ⱥp��ѡ��m����Ӧֵ��ߵĸ��壬���Ƹ����ĩ��λ���б��죻
������������n-m������Aoi�����ݸ������Ӧֵ�����㶯̬�������Pm������Aoi�е�ÿһλ������Pm����.
��������7.�滻
����������Apb��Aow�ֱ�����һ����Ⱥp�е����Ž���²������Ӵ�O�е����⣺
������P=(O-{Aow})��{Apb}.
��������8.����AbΪ��һ��p�е����Ž�
������if��f(Ab)>f*
������then Ab*=f(Ab),g*=ת����2��
������else if g-g*<G,GΪԤ�ȸ�����һ���Ƴ�����
��������then��ת����2��
��������else���������Ž�A*b.
4����Ԫ����������
�������в������϶��µķ��������Ԫ�����������Ӷ�Ԫ�������ĸ���㿪ʼ���Ŵ��㷨������Ȩֵʸ����ʹ�ý��ľ��ߠb���ָ�������Ĵ����ʼ������ﵽ���������Ȩֵʸ���������ָ�Ϊ�����Ӽ����������˽��Ķ����ӽ�㣬�ظ��˷ָ����ֱ�����������ֹ����������˽��Ϊ�ս��.Ϊ���������㣬������������.
��������3.N0ΪԤ�����������������������.
��������4.I1ΪԤ���������С������ֵ.
��������5.I2ΪԤ������ָ��Ĵ����ʼ�������Сֵ.
��������6.��ֹ����Ϊi(xt)С��I1����#xtС��N0��i(xt,)С��I2.
����������ֹ�����Ľ��Ϊ�ս�㣬�������Ԧ�i�������¹�ʽ���㣺

������Ԫ�������Ľ�����ݽṹ��C++��ʾ���£�
������classTreeNode:publicCObject{
��������public��
������������classTreeNode��*m_left;//����ָ��
������������classTreeNode��*m_right;//�ҽ��ָ��
������������CVectorm_weight;//Ȩֵʸ��
������������CObArraym_sampleSet;//�������������Ŀ
������������intm_classType;//�����Ԧ�i
��������}
���������Ԫ���������㷨���£�
��������1.�������⣻
��������2.�������������Ա�׼����
��������3.���ɸ���㣻
��������4.�ݹ齨����Ԫ��������
��������#xt<N0������tΪҶ��㣬����.
��������i(xt)<I1������tΪҶ��㣬����.
���������Ŵ��㷨�����t��Ȩֵʸ��w.
�����ܰ�Ȩֵʸ��w�ָ�xtΪxtL��xtR��
��������xtL(w)={x|x��xt,����wTx<0}
��������xtR(w)={x|x��xt,����wTx>0}
��������ָ��Ħ�i(xt,w)ֵ.
����������i(xt,w)С��I2��������tΪҶ��㣬�ý�����������Ϊ�գ��������ɽ��t�����ӽ������ӽ�㣬�������������ֱ�ΪxtL��xtR.
���������Խ��t�����ӽ��ݹ���ý�����Ԫ��������
���������Խ��t�����ӽ��ݹ���ý�����Ԫ������.
����5.��ÿ��Ҷ��㣬��������������.���ؾ�����T.
5��ʵ����
�������Թ�Ʊ����Ϊ��˵����Ԫ�������ķ������.ѡ��159�ֹ�Ʊ��Ϊ����.ѡ���Ʊ�����ʲ���ת�ʡ����������ʡ����������ʡ����ʲ������ʡ����ʲ���ģ�����ʲ������ʡ����۾����ʡ����ʲ������ʡ��ɶ�Ȩ�����Ϊ���۱�׼.���۽����Ϊ���࣬�ֱ��ʾ���š���������ͨ�����ֲ�ͬ�Ĺ�Ʊ���.
����ѡ����С������I1����С�ָ�����ʼ�����I2��Ϊ�α������Ŵ��㷨�Ľ�����ʡ�������ʡ���������G����С��������Ϊ�̶�ֵ���ֱ�Ϊ0.9��0.3��100��2.�������˶��ʵ�飬ƽ��������1��ʾ.
��1����Ԫ������������

��С������I1��С�ָ�����ʼ�����I2������������������
0.050.038.725.48��
0.050.022.841.78��
0.050.010.690.43��
0.040.034.102.57��
0.040.022.141.34��
0.040.010.520.33��
0.030.021.981.25��
0.030.010.450.28��
0.020.021.350.85��
0.020.010.360.23��

������С������I1����С�ָ�����ʼ�����I2ֱ�Ӿ�����Ԫ�������Ĵ�������ʣ��ӱ�1�п��Կ����ı���С������I1����С�ָ�����ʼ�����I2�����Կ��ƶ�Ԫ�������Ĵ�������ʣ�ʹϵͳ��Ϊ�ܿ�ϵͳ. 
6��������
����������������Ŵ��㷨�����Ԫ�������ķ����������Ŵ��㷨�����˸Ľ������Ե�������㷨�������ٶ�.�÷�������˱�ʶ������׼ȷ�ʺ��ٶȣ�Ϊ���������ṩ��һ�ּ򵥡�ͨ�á���Ч�ķ���.�����������ص㣺���Ŵ��㷨�ĸĽ������Ŵ��㷨������Ȩֵʸ�����۸��������Ĵ�������ָ��Ĵ����ʼ����������Ԫ���������ܶ�Ԫ�������Ĵ�������ʿ�����Ϊ����.
*������õ�������Ȼ��ѧ��������(��Ŀ���79670023).
���߼�飺��ƣ�Ů��1973��5��������ʿ�о�������Ҫ�о�����Ϊ�Ŵ��㷨����Ȼ������⡢���ܾ���֧��ϵͳ.
���������������ƣ��У����ڣ���ʿ����ʦ����Ҫ�о�����Ϊ����֧��ϵͳ��������Ϣϵͳ.
���ߵ�λ����������ҵ��ѧ����ѧԺ����������150001
�ο�����
1��Goldberg D. Genetic Algorithm in Search, Optimization and Machine Learning. Reading, MA: Addison-Wesley, 1989
2���¶��죬�����㣬������. ���ھ�����ѧϰ�еĲ������ɼ��������Ե���ɢ��. ������о��뷢չ��1998, 35(5)��403��407
����(Chen Enhong, Wang Qingyi, Cai Qingsheng. Test generation and discretization of continuously-valued attributes in decision-tree-based learning. Journal of Computer Research & Development (in Chinese), 1998, 35(5):403��407)
3��Ф�£�������. ���Ŵ��㷨���������.������о��뷢չ��1998, 35(1):49��52 
����(XiaoYong, Chen Yiyun. Constructing decision trees by using genetic algorithm. Journal of Computer Research & Development (in Chinese), 1998, 35(1): 49��52)
4��Chai B B, Huang T, Zhuang X H, Sklansy J. Piecewise linear classifiers using binary tree structure and genetic algorithm. Pattern Recognition, 1996, 29(11): 1905��1917
5����ΰ��. �Ŵ��㷨������������������е�Ӧ��.�������պ����ѧѧ����1998, 24(4)��434��437
����(Jia Wei et al. Genetic algorithms and their application in software��unit_test data generation. Journal of Beijing University of Aeronautics and Astronautics (in Chinese),1998, 24(4): 434��437)
ԭ���յ����ڣ�1999-01-13���޸ĸ��յ����ڣ�1999-08-08.
