���ѧ��
JOURNAL OF SOFTWARE
1999�� ��4�� ��10�� Vol.10 No.4 1999



����Web�ķֲ�ʽ����ʵʱ���ϵͳ�������ʵ��*
��Һ����⽨ƽ�����ӻ�
ժҪ�����Ŵ��ģ����Ľ����Ӧ��,�������������Խ��Խ��Ҫ.���ڴ�ͳ�ļ���ʽ���������ģʽ��Խ��Խ����ʤ�������,���Ǽ�ʱ������˷ֲ�ʽ�������ĸ���.����������һ������Web�ķֲ�ʽ����ʵʱ���ϵͳ(WebRMonitor)������ṹ��ϵͳʵ�ֵĹؼ����������ݲɼ�ģ��������ʵ�ֺ�ʵʱ���ݵĿ��ӻ���ʾ��.
�ؼ��ʡ����������,�������,�ͻ�/�������ṹ,Web������/�����,�������ؽӿ�CGI,Java.
��ͼ������š�TP393
��
Design and Implementation of a Web-based Distributed 
Network Monitoring System
YANG Jia-hai1 WU Jian-ping1 LI Zhong-hui2
1(Department of Computer Science and Technology Tsinghua University Beijing 100084)
2(Center of China Education and Research Network Tsinghua University��Beijing��100084)
Abstract�� With the construction and application of lots of large-scale internetworks, it becomes more and more important to manage these internetworks. Since the conventional centralized network management mode becomes less competent, a distributed network management architecture is proposed in this paper. The structure of a Web-based distributed network realtime monitoring system����WebRMonitor is discussed, and its key implementing techniques are given, such as the gathering, decentralized presentation of the realtime data and so on.
Key words��Computer network, network management, client/server architecture, Web server/browser, CGI(common gateway interface), Java.
�������ż������ͨ�ż����ķ��ٷ�չ,����������Ѿ���͸����ᾭ�õĸ�������,����ᾭ�÷�չ����Խ��Խ��Ҫ������,Ҳʹ���ǵĹ����������ʽ�����޴�ı��.�������Ƕ���������������ȥ���ǶԵ绰������һ��,���¼����ӵ��ж�Ҳ���������̵�.���ͬʱ,���������ģ������,Ӱ��������������Ҳ������,�������豸����������MODEM��·�����Լ�ͨ����·�ȣ���ʧЧ���⡢�������ն˵Ĺ������⡢����г��ֵ����⡢��ȫ��������ȵ�.���,�������ĸ��Ӷ�Ҳ�������.��ν�����Ч���������,ȷ����Ϣ����Ŀɿ����ȶ��������Ѿ���Ϊһ��������Ҫ����������1��.
�������Կ��ű�׼Ϊ���������绥��������,�������ҲӦͨ����׼����ʵʩ��2��.���ʱ�׼����֯ISO��Internet��֯���ⷽ�涼���˴����Ĺ���,������˸��Ե�Э���׼�ͷ���,��ISO�Ĺ���������Ϣ����Э��CMIS/CMIP��3,4��,Internet�ļ��������Э��SNMP v1/v2��5,6��.
����������ʷ�Ϳ͹۵�ԭ��,ISO��CMIS/CMIP��Ȼ����ú��걸,��ȴû�еõ���ҵ��Ĺ㷺֧��.��Internet��SNMPһ������͵õ���ҵ��Ĺ㷺��Ӧ,��๫˾����Ƴ��˻���SNMPЭ���׼���������ϵͳ�Ͳ�Ʒ,��Sun��˾��SunNet Manager,HP��OpenView,IBM��NetView/6000�ȵȣ�7��.��Щ��Ʒ���Ƴ�,һ�Ȼ�������������ì��.
����Ȼ��,�����������������������ϵͳ��,���ǻ��ڵ�һ������Manager-Agentģʽ,������������������Manager�Ӹ�Agent�ռ�������Ϣ,�ڱ�����ɶ���Ϣ�ķּ�ʹ�����,�����������Ļ�������ʾ���������������,����һ�ָ߶ȼ��е��������ģʽ.���Ʊػ�������������ĳ�������ת,����ؽ����������ϵͳ������Ч��.������ز����Ļ�������ʾҲҪ��������Ӧ������ƽ̨,û��һ��ͳһ����Ч�ļ�ؽ���,���������Ա�Ĳ�����ʹ�ô�����һ��������.
�������,���Ǽ�ʱ�����˷ֲ�ʽ�������ĸ���.�ⲻ�������ڵͶ�������Ϣ���ռ���,���������û��˵ļ�غ͹�������ϣ�8��.Web/Java�����Ŀ��ٷ�չ�͹㷺Ӧ��ʹ�÷ֲ�ʽ�������Ӹ���������ʵ��9��.�����Ƴ���һЩ�����������ϵͳ,��Advent��˾��NetMonitor�ȣ�10��,���û�����ֱ��ʵ���ڵ�����Ϊ���е�Web�����֮��,ʹ�û�����ֱ��ͨ��Web���������ɶ�����Ĺ���ͼ�أ�һЩ��ͳ����������Ʒ��Ӧ��,��HP,IBM��Ҳ�������°�����ܲ�Ʒ�м����˶�Web��֧�֣�11��,����������ͳһ�������ͷֲ�ʽ�����Ͻ��е�һ�ֳɹ��ĳ���.��ʹ�û�����������ѧϰ���ӵĽ����������,ֻ�������WWWһ��,��������ɵ�������������,Ҳ���ؾ�����ĳһ�ض�ƽ̨,����޶ȵ�ʵ���˿�ƽ̨����Ĺ���.
������Ȼ,����WEB���������ոտ�ʼ,һЩ�����ṩ�Ĳ�Ʒ�书��Ҳ������.�������ҹ�Ŀǰ���ڽ���һϵ��ȫ���ԡ���ҵ�Լ��������Ľ���,�����˴�����ͳ����ʽ���������ƽ̨.Ϊ�������������й���,ҲΪ�˱���ԭ�е�Ͷ��,�����ڹ��ҡ����塱������Ŀ�������½�����������������ƽ̨�ġ�����WEB�ķֲ�ʽ�����������о�.����������һ������WEB�ķֲ�ʽ����ʵʱ���ϵͳ(WebRMonitor)������ṹ��ϵͳʵ�ֵĹؼ����������ݲɼ�ģ��������ʵ�ֺ�ʵʱ���ݵĿ��ӻ���ʾ��.
1��WebRMonitor������ṹ
���� �����ϵͳ��IBM NetView/6000�������ϵͳ��������IBM RS/6000����վ�ϣ�Ϊ����,�������ռ���������Ϣ,�ڿͻ��˵�Web�������ʵ�ֶ�����������������Ϣ��ʵʱ���,�����ṩ��NetView/6000ϵͳ��Ϊ���ƵĲ�������,�Է����������Ա��ʹ��.ϵͳʵ�ֵ�Ŀ���Ǿ���������޶ȵ�ʵ�ֲַ�ʽ���ģʽ,ͬʱ��Ҫ�����������������ĸ���,������������Ч��.
��������Ҫ��,��������������ϵͳ���ص�,���Խ���Ҫ��Ƶ��������ϵͳ��Ϊ3��ģ�飺�������ݻ�ȡģ�顢ͳ��ͼ�λ���ģ��ͻ������Կ���ģ��.����������˼����������ϵͳʵ�ֵ�Ŀ���ǰ����,�����ɹ��������Ķ��������.���ڿͻ�/������ģʽ��ͨ�Ż���Ϊʵ���������˼���ṩ�˿���,����������NetView/6000�ṩ���Ƚ��������������,��������Web��ǿ��ͼ�ι���.�ڷ�������,ֻ�����ܷ�����NetView/6000ͳһ�ɼ�ʵʱ����,����������ֻ���������ܷ������ɼ�������,���������ݸ�ʽ�ķ���ת���ʹ��͹��������������ϵ�ʵʱ���ݴ��͵��ͻ����Ժ�,�ɿͻ��˵�Web�����������Ӧ�������ʵʱͼ�εĻ���,��ʵ�ֶ�ͼ�����Եı��ؿ���.�����Ϳ���ʹ����������ͬʱҪ���ƴ���ʵʱ���ߵĳ��ظ����н��ѳ���,������Ҫ�����������ݵĲɼ��͹��ϵķ��ֵȹ�����,�⽫���������ܷ�����������Ч��.
WebRMonitor������ʵ�ֽṹ��ͼ1��ʾ.

ͼ1��WebRMonitor������ṹ
����(1) WebRMonitorϵͳ��Client/Serverģʽ����,�ͻ��������֮���ͨ�Ų���HTTPЭ�����,�������˳�����ʵʱ���ݵĲɼ����ʽ��ת���ȹ���,�ͻ��˳�����ʵʱ����ͼ�εĻ��ơ��������ԵĿ��Ƽ�����һЩ���ӹ��ܵ�ʵ��.
����(2) ����Plug-in����ʵʱ���еĸ�Ч��,���ҿ��Դ�ȡ�ͻ��˵ı����ļ�,��˾�����Plug-in��ʵ��ͳ��ͼ�λ��ƹ���ģ�飻����Java applet�Զ��̵߳�֧�ּ���ƽ̨�޹���,��ʹ��Java applet��ʵ�ֻ������Կ��ƹ���ģ��.
����(3) Web Server�����ܷ�����������ͬһ̨������,�ڷ�������,ͨ����׼��CGI�ӿ�ʵ�ֶ����������������ռ�������ʵʱ���ݵĴ�ȡ�������봫��.���ĵ�����Ϊ�ͻ���Plug-in��������еǼǵ�MIME����.
����(4) �ڿͻ���,��Plug-in��ʽ����������ݵĶ�ȡ��洢,�����ʵʱ���ݵ�ͼ�λ��ƹ���,ͬʱ,Ϊ����NetView/6000�������ϵͳ����Ӧ����һ��,���ṩ�Ի�ͼ������Ӧ����¼��Ĵ�����(ָʾ�������ݶ�Ӧ��ʱ��).
����(5) �ڿͻ���,��Java applet���ͼ�λ������Ե�ʵʱ��̬����,����ֱ�ӵ���Plug-in��ʵ�ֵı��ط�������ͼ�θ���,ͬʱ������һ���߳����Զ�ʱ����Plug-in��ʵ�ֵ���һ���ط���,�Ӷ���ɶ�Server��CGI�ĵ���,��ʵʱ��ȡ��������.
����(6) ���ǵ�һ������綼��ͬʱ��ض�������豸�Ͷ���ͨ����·,���,�������ƻ�Ӧ�ÿ��ǵ��ɸ����û���Ҫ���ж��ƵĹ���.��Ϊ���Ӳ���,��ϵͳҲʵ���������Ĺ���.
2��ʵʱ���ݲɼ�
����ʵʱ���ݲɼ���WebRMonitorϵͳ�Ļ���,��ǰ����,�ù����ڷ�����һ�ˣ�Ҳ�����ܷ�������.ʵʱ���ݲɼ���Ҫ����������⣺һ������ν����ݴӱ��ܶ���ϵͳ�ռ������ܷ���������,��һ�������ܷ������ռ���������δ��ݸ�Web������.
2.1 ���ݲɼ�
�������ܷ������ͱ��ܶ���֮���ͨ�����ñ�׼SNMPЭ�����,���,�����1�����������ַ�������ѡ��,һ������������NetView/6000ϵͳ�Ѿ�ʵ�ֵĹ���������,��һ���������Լ�ʵ��һ��SNMPЭ��.��������ʵ��һ��SNMPЭ��Ĺ������ϴ�,ͬʱҲ���ǵ�NetView/6000ϵͳ����෽�滹�Ǻ������,���,���Ǿ�������NetView/6000���еĹ�����ʵ��ʵʱ���ݵ��ռ�.
��Ȼ,����ѡ����һ���̶��������˽����2��������Ѷ�.NetView/6000��XnmGraph��ͼ�������ֱ�ӽ���SnmpCollectʵʱ�ռ��Ķ�̬���ݣ������Ƹ�ʽ������ɻ�ͼ����,������NetView/6000��IBM��˾����Ʒ�����,����δ������Щ��Ӧ�����ݽӿ�.Ϊ������NetView/6000�ռ���������ʵ��ʵʱ���ݵķֲ�ʽͼ����ʾ,���ȱ��������Щ���ݵĽṹ�͸�ʽ.
����ͨ����������NetView/6000����ؼ����ֲ�ʹ�����ʵ��,���������ʵʱ���ݵĸ�ʽ,��ʵ��������ؽ�����������ת����ASCII��ʽ���ݵĹ���,��Ϊ���潫ʵʱ���ݴ��ݸ�Web������,����Web���������͵��ͻ��˽�����ʾ���ͼ�ṩ�˱�֤.
2.2 ���ݴ����봫��
������׼CGI�ӿ�Ϊ�ⲿ���ݽ���Web�������ṩ�˱�׼�ӿ�.CGI��̵ĺ����ǽӿڲ�����ȷ��������.���ڴ����ܷ������ռ����������ݴ���һ���ļ���,���������һ���ļ�������filename.����,Ϊ���ܻ�������һ�������,��������һ��λ�ò���pos,����ָʾ�ϴε��ļ���ȡλ��.����֮��,Ϊ�˽���ֲ�ʽ���ݴ洢��һ��������(����֤Client/Server���˵����������ļ���һ����),��ÿ�οͻ��˵��������ϵͳ����ʱ,�����������ļ�����(���������ļ��ĳ��ñ�����Ϊ�˼���ϵͳ����ʱ����Ĵ�����),��Ӧ��CGI����һ��unit_test������Ϊһ���Բ��Ա�־,CGI�ɴ˶�ȡ��Ӧ��ʷ�ļ��ĵ�1�����ݵĽ���ʱ�䲢���ؿͻ���.����,�ͻ��˽����ص�ʱ��ֵ�뱾���ļ��еĵ�1��ʱ��������Ƚ�,���������,��˵�����˵���ʷ����һ��,��ֻ���������ݣ������߲����,��˵��Server��(��������)����ʷ�����ļ��ѷ����˱䶯(����,ɾ������ʷ�����ļ�,����ļ������½���,��1��Ľ���ʱ�伴�����仯),��ʱ��Ҫ�ش�������ʷ�����ļ�,�Ӷ���֤��Client/Server�����������ݵ�һ����.
���������ݵĴ�����,����ͬʱ���ڲ������ȡ����������ļ���4����������,��Ӧ�ڴ������ݵ�ͷ������1�ֽڵı�ʶλ��ָʾ�������ݵ�����,�Ա�֤�ͻ��������紫���첽�Ե������,����ͨ���ñ�ʶλȷ����������,��ȷ������ݵĶ�ȡ�봦����.���嶨���ǣ���0���롰1���ֱ��ʾ��/���ڲ�������,����ֻ��8�ֽڵ�ʮ������ASCII���ִ�(���ɶ����Ƴ�����ת��������),������Ӧ�ļ��ĵ�1�����ʱ�䣻��2���롰3���ֱ�����˵����������Ϊ��/������������,���ĵ�1��8�ֽ�ʮ������ASCII�ִ��Ǵ˴ζ�ȡ��Ӧ��ʷ�����ļ������λ��,�Ա�ͻ��˽��м�¼,���´�CGI������pos������ʹ�ã��������16�ֽ�Ϊ��λ��������.
����CGI������cgic�ṩ��cgiHeaderContentType�⺯����ָ�������ĵ���MIME����,�ڴ�,�ر�־Ϊ��application/x-netmon-plugin�����µ�MIME����,�Ա�ͻ�������������ǼǴ����͵�Plug-in���ж�ȡ�ʹ���,�Ӷ���ɱ��������ļ��ļ�¼��ͳ��ͼ�εĻ��ƹ���.���ݴ����봫��ģ��Ĺ���������ͼ2��ʾ.

ͼ2��ʵʱ���ݵĴ����봫��
3��ʵʱ���ݵ�ͼ�λ���ʾ
������Web�������ʵ�ֶ�һ��ͼ�εĻ��Ʋ�������,Java������Plug-ins����������ʵ��,����Ĺؼ�������Ҫ����ʵʱ�ԡ�Ч�ʺ������,����ζ�ʱˢ��ʵʱ����,��������Ч�ض�ͼ�ν��п���.Ϊ��ʵʱˢ������,�����ڿͻ���ʵ����һ����ʱ���Ͳ�ѯ��Ϣ�Ľ���(���߳�),���ɿͻ��˶����Ƿ���������ʵ�����ݵĸ���,�ڶ�ʱ�����ѡȡ��,Ӧ�����ܷ������ɼ����ݵļ������ͬ��.
�������ǵ�Plug-in����ʵʱ���еĸ�Ч��,���ҿ��Դ�ȡ�ͻ��˵ı����ļ�,�ʶ�������Plug-in��ʵ��ͳ��ͼ�λ��ƹ���ģ�飻����Java applet�Զ��̵߳�֧�ּ���ƽ̨�޹���,ʹ��Java applet��ʵ�ֻ������Կ��ƹ���ģ��.�����Ҫ�漰��Java��Plug-in�Ľӿ�����,���ҵ��� Netscape��˾������Live Connect����,���øü�������ʵ��ͬһ��ҳ�ڵ�Java,Plug-in��Javascript����֮����໥����,ʹ�����л��ؽ����һ��,�Ӷ�ʵ�ָ�Ϊǿ��Ĺ���.ͨ����ϸ�Ķ�Live Connect�ļ�������,���Ƿ���,�������ʺ��������ϵͳ�ͻ���������ģ����Ʒ����ļ���Ҫ��,����Netscape��˾��������ַ���ṩ��һ��Live Connect/Plug-in SDK�����������.���,���Ǿ�����Live Connect����Ϊ�����������������ϵͳ�ڿͻ��˵�������ģ��.
����Live Connect����������ʵ��ͬһ��ҳ��Java,Plug-in�Լ�Javascript������֮�����ϵ�͵���,����Ĳ���ΪJava��,������ֱ������ҳ�ڵ�Plug-in��Javascript��������໥����,��Plug-in��Javascript֮��Ĺ�������ͨ��Java����ʵ�ֵ�.Java����Plug-in�໥���õ�ʵ���ֶ��ǽ���ҳ�ڵ�Plug-in��װ��һ���µ�Java��,��netscape.plugin.Plugin��,���Ǵ�java.lang.Object���������ɵ�,��Netscape�ṩ��Java Package����.����,Java��Ϳ���ͨ����Plugin��Ĳ�������ɶ�Plug-in��ʵ�ֵı��ط����ĵ���,��Plug-inҲ����ͨ��JRI(Java Runtime Interface,Java����ʱ���ӿ�)��ʵ�ֶ�Java����Ӧ��Ĵ�ȡ���䷽���ĵ���.
����Java applet���ṩ���ƽ���Ͷ�ʱ�߳�,�����û����趨ֱֵ��д��Plugin��֮�е���Ӧ��(����Ա����),ͬʱͨ������Plugin��ı��ط��������Ӧ�Ŀ��ƹ���.Java applet��ͨ��Netscape��˾���ṩ��Java Package�а�������һ���µ�Java��netscape.javascript.JSObject���һЩ������ʵ����ͬһ��ҳ��Javascript���������(JSObject����Netscape����ҳ�ڵ�Javascript������з�װ��������).
������Server��CGI�ĵ����Լ����������ļ�����������¶�����Plug-in����ɵ�,Ϊ�����ܼ���ϵͳ����ʱ���������ݴ�����,�ͻ��˱����ļ������ñ��沢�����ʵ������(ͨ����������������־�ļ�,ʵ�ֶ����ͬ���ʵ������ͬһ���������ļ�,�Ӷ������ظ����������ݴ���).Ϊ�˱�֤�ͻ��˱��������ļ�����Ч��,��ϵͳ����ʱ�����Client/Server���������ļ���һ����,��һ��,����贫�Ϳͻ��˱��������ļ���û�е�������,����,��ɾ���ͻ��˱��������ļ�,ȫ�������ش�.�����������ݴ��������ڵ��첽��,ΪPlug-in�����ݶ�ȡ���������һ���ļ���,�Է�ֹ����������������ĳ���.����,��Plugin����Ҳ�����һ��������,����ʵ��Java applet������Plug-in���ش���Թؼ�������ȡ�Ļ�����,��֤��������ݵ�һ����.
4��������
����Ŀǰ,WebRMonitorϵͳ�Ŀ����������Ѿ����,ϵͳ�ѽ���CERNET�������Ĳ�������.
����ϵͳWebRMonitorʹ����Netscape��˾�����е�Live Connect����,����,Ŀǰֻ֧��Netscape Navigator 3.0 (�����߰汾)�������.����,������������Ŀǰ����ʹ�õ�������Solaris UNIX����ϵͳ�Ĺ���վ,��˿ͻ��˵��������ϵͳƽ̨�ݶ�ΪSolaris��UNIXϵͳƽ̨.��Server��(��������)�Ĳ���ϵͳ��������IBM RS/6000�ϵ�AIX 3.2,���Web����������Ӧ��CGI�������ǻ���AIX 3.2ϵͳƽ̨��ʵ�ֵ�.
������ϵͳ����������Ʒ��滹����๤��Ҫ��,����׼�����������������һ������ϵͳ.һ������֧�ָ���Ŀͻ���ϵͳƽ̨,��㷺ʹ�õ�Windows 95��Windows NT��,����ʹ��ϵͳ���и��㷺��Ӧ�÷�Χ�ͻ���.��һ���������Ӽ�ص�����.Ŀǰ��ʵʱ�����Ҫ�����ڼ�����������·��ʵʱ�Ľ�������,ʵ����,�û�����ӵĲ���������Щ����,�û�Ҳ����֪��ĳЩ�ض���·�Ķ����ʡ������ʣ��ؼ����绥���豸������״��,��·����CPU�������ʡ��ڴ�������ʡ��豸�����¶ȵȵ�.����ϵͳ�����˷ֲ�ʽ�ͻ�/�������ṹ��ģ�黯���,Ϊϵͳ����չ�����˼���ķ���.����,Ϊ�˼��·����CPU��������,ֻ���ڷ��������ݲɼ����ı�ɼ����󼴿�.Ŀǰ�����Ѿ�������������,���ھ���ʹ��ϵͳʵ�û���ͨ�û�.
*�������о��õ����ҡ����塱�Ƽ�������Ŀ��������.
����ͨѶ��ϵ��:��Һ�,����100084,�廪��ѧ�������ѧ�뼼��ϵ
���߼�顡��Һ�,1966����,������,��Ҫ�о�����Ϊ����Э�鹤��ѧ,������ϵ�ṹ,�������Ӧ��.
�����������⽨ƽ,1953����,����,��ʿ����ʦ,��Ҫ�о�����Ϊ����Э�鹤��ѧ,������ϵ�ṹ,�������.
�������������ӻ�,1974����,˶ʿ��,��Ҫ�о�����Ϊ�������.
���ߵ�λ����Һ����⽨ƽ(�廪��ѧ�������ѧ�뼼��ϵ��������100084)
�������������ӻ�(�й������Ϳ��м�������������ġ��廪��ѧ��������100084)
�ο�����
��1��ISO/OSI. Basic Reference Model for Open System Interconnection. IS7498, Oct. 1984
��2��Lynch Daniel C, Rose Marshall T. Internet System Handbook. Reading, MA: Addison-Wesley Publishing Company, Inc., 1993
��3��ISO/OSI. Management Information Service Definition, Part 2: Common Management Information Service. IS9595-2, ISO, Switzerland, May 1988
��4��ISO/OSI. Management Information Protocol Definition, Part 2: Common Management Information Protocol. IS9596-2, ISO, Switzerland, May 1988
��5��Case Jeffrey D, Fedor Mark et al. A Simple Network Management Protocol(SNMP). RFC1157, Internet Network Working Group, May 1990
��6��Galvin James M, McCloghrie Keith. Administrative Model for Version 2 of the Simple Network Management Protocol(SNMPv2). RFC1445, Internet Network Working Group, Internet Engineering Task Force, Apr. 1993. ftp: //nic.ddn.mil
��7��IBM Corporation. NetView for AIX Administrator's Reference Version 3. Sep. 1994
��8��Gottfried Luderer, Hosoon Ku et al. Network Management Agents Supported by a Java Environment. In: International Symposium on Integrated Network Management (ISINM'97). San Diego, CA, 1997. http: //www.eas.asu.edu/��netsys
��9��Sun Microsystems. The Java Language Environment����A White Paper. http: //www.sun.com
��10��Advent Network Management, Inc.. Delivering Web Based Network Management Tools. http: //www.adventnet.com
��11��HP Corporation. HP Openview Bridging the Gap. http: //www.hp.com/openview
����1998-01-13�յ�ԭ��,1998-04-15�յ��޸ĸ�
