΢�ͻ���Ӧ��
MICROCOMPUTER & ITS APPLICATIONS
2000��No.19��No.1��P.10��36




��VRML���Թ��춯̬������ʵģ��
������Ԭ�괺
ժ Ҫ�� ��VRML2��0���Թ��춯̬������ʵģ�͵ļ��ַ��������ÿ�ַ���������VRML�﷨ʵ���������ؽ����˲�ֵ�����������󶯻��е���Ҫ���á� 
�ؼ��ʣ� ��ֵ�� ·�� ������ʵģ�� VRML����
������������ʵ�����У���ģ--����������ʵģ���������Ҳ������Ҫ��һ�����ڣ�ֻ����1��������������������У��û��������ؽ����˻��������������εȻ��VRML��Virtual Reality Markup Language�����Ծ���Ϊ����WWW�Ϲ���������ʵģ�Ͷ������ģ�����1��3D Web��׼����ĿǰΪֹVRML��2���汾��VRML 1��0��VRML2��0����2���汾���Ĳ�ͬ���ڣ�VRML 1��0û�а����߼������Ͷ������ܣ������չ�ֵ���Ȼ��һ����̬�����磬��VRML2��0���ⷽ�������ش�ͻ�ƣ�����ĿǰΪֹ�ĸ����ý�弼���ںϽ�ȥ��ʹ���������ά������������������������˻������ȹ��ܣ��Ӷ�ʹ��������������ģ������ʵ�����硣VRML2��0�ṩ�˶��ֹ��춯̬������ʵģ�͵ķ��������½����Խ��ܡ�����ʵ�����������Ӷ��߿����ڻ������Լ�ʵ�飬������Microsoft��WordPad�༭������VRML�ļ����ļ������ԣ�wrl��Ϊ��չ����ֻҪ���������Netscape Navigator��Internet Explorer��װ��VRML�Ĳ����˫���Լ����ļ���������ʾ���������������ʵ��������
1 ���춯̬������ʵģ�͵ļ��ַ���
����1��ʹ�ò�ֵ���ı����
������ֵ���ڵ��кܶ��֣�������ɲ�ͬ�Ĺ��ܣ���ı�����ڳ����з����OrientationInterpolator�ڵ㣬�����ƶ���PositionInterpolator�ڵ㣬���ڱ����CoordinateInterpolator�ڵ㣬����ColorInterpolator�����޸�Material�ڵ����ɫ��NormalInterpolator���Ըı䷨��ڵ��е�ֵ�ȵȡ����⣬ScalarInterpolator��1�������Ĺ���ģ�飬�������Խ�����������ֵ��ʹ�ò�ֵ���ı�����ԭ���������ͬ�ģ�������OrientationInterpolator�ڵ�ʵ����ת����Ϊ����
����������OrientationInterpolator�ڵ�Ķ��壺
����OrientationInterpolator��
����eventIn��������SFFloat��������set_fraction
����exposedField��MFFloat������key��������������[]
����exposedField��MFRotation��keyValue��[]
����eventOut������SFRotation��value_changed
������
������ͨ��·�ɵ�1��Transform�ڵ��rotation exposedField�����е�keyValue��1��SFRotation���������ö����������ķ���
������������ֵ�������У���TimeSensor�ڵ���ʱ������Ų���0��1֮�������SFFloatֵ��ÿ����1��ֵ������·�ɣ�OrientationInterpolator�ڵ�������ֵ����������ֵ��ؼ������ƥ�䣬һ��ƥ��ɹ������Ӧ������ؼ��루key���Ĺؼ���ֵ��keyValue�������ͳ�ȥ��������ֵ����2�����ڵĹؼ���֮�䣬�����1������2���ؼ������Ӧ�Ĺؼ���ֵ֮����в�ֵ���¼����õ��Ĺؼ���ֵ��ͨ����2��·�ɣ�ʹTransform�ڵ���յ����ֵ���Ӷ��ı������λ�á�
�����򵥵ؽ���ʹ�ò�ֵ���ı�����γɶ������û�ֻ�����һϵ���˶��켣���м�̬�ƣ���VRML�������Զ�ƽ����������Щ�м�̬�Ƽ�Ĺ��ɣ��Ӷ��õ�ʹ��������·�߱仯�Ķ�̬Ч����
����2���ڶ����ϰ�װ��Ӱ�ļ�
�����ѵ�Ӱ��Ϊһ���ƶ�������ʩ�ӵ������ϣ���ʹ�����������һ�ֶ�̬Ч����������1�����ⷿ���з�����1̨���ӻ����������߽��뷿��ʱ���������ӻ���Ļ�����ڷ�ӳ���ӻ��Ӱ��������һ����ֹ�����ͼ����Ȼ�ʹ�����ǿ����������ı���̶ȡ���MovieTexture�ڵ���ɶԶ���İ�װ��MovieTexture�ڵ��е�url�����1����Ӱ��ʽ���ļ���������1����̬ͼ���ļ�����Ӱ�Ĳ��ſ����п�ʼ��ֹͣ��������ѭ���Լ��Է��������ٶȽ��в�ӳ��
����3��ʹ�ý�ɫ���ж����л������춯��Ч��
������ν��ɫ��ָ1��ƽ̹��ʼ�������Ķ�����ͼ������һ�������������е�2D���󣬿�����Ⱦ�ø��죬������ƽ��ģ�����Ӳ��濴�����Ǿͻ���ʧ����Ϊ�˵õ������Ч������ɫ��Ҫʼ��������ڡ�
������ɫ���л�����MySwitch�ڵ���ɵģ��ýڵ���Ը��ݱ仯��whichchoice��ֵѡ����Ӧ�Ľڵ���ʾ����TimeSensor�ڵ����������ʼʱ�䣬��fraction_changed�¼���ֵ���ݵ�MyScript�ڵ㣬�����ýڵ��fraction���������õ�whichChoice�¼���ֵ������whichChoice�¼���ֵ���ݵ�MySwich�ڵ㣬�Ӷ���ʱ�����������ѡ��1����ɫ��ʾ������ֱ��ʱ�������������������̡�
����4���ӵ㶯��
���������û�վ����·�ԣ��û�������·�ߵķ����Ǿ�ֹ�ģ����û����ϻ𳵣��𳵿������û�����·�ߵķ��ӿ�ʼ�˶�������������Ϊ�û����ӵ㲻���ƶ���ԭ������VRML�ṩ�ӵ�Viewpoint�ڵ㣬����ڵ�����Ϊ�û�����1����Ȥ��������λ�úͷ���ͨ�����ϸı��ӵ��λ�úͷ�����Դﵽ�Ͳ��ϸı����λ�úͷ������ƵĶ���Ч����
������fraction_changed�¼���������ʱ�䣩ֵ���ݵ���ת�ڵ㣨OrientationInterpolator����λ�ýڵ㣨PositionInterpolator���Բ����µ��ӵ㷽���λ�ã��ֱ���²������ӵ㷽��λ�ô��ݵ��ӵ㣨Viewpoint���ڵ����Ըı�ԭ�ȵ�ֵ���Ӷ���������Ч����
����5��ʹ����������Ķ���
���������1����άͼ������ڶ�������������ɫ������ͬ��ǽ����ǽֽһ����Ҳ�ܵõ��ܺõ�Ч�������ֶ�άͼ����������ڵ�ImageTexture���������������ͼ��һ����JPEG�ļ�����ʱҲ������GIF�ļ���
��������Ҫ����1���ٲ���������1����������ʩ��һ��ˮ�������������������Ǿ�ֹ�ģ�Ҫ��������������һ�ֱȽϼ򵥵ķ��������ö����������֮���ӳ�������еı任����ͨ��TextureTransform�ڵ��ƶ�����ת�����Բ�������Ч������ˮ������任�ϣ�����ʹ���������������ϰ�ʱ��ѭ�����ƶ����û��ͻῴ���ٲ���ˮ�Ķ����ˡ�
2 VRML���춯̬������ʵģ�͵�ʵ��
�������¸������ֹ��춯̬������ʵģ�ͷ�����ʵ����
����1�������ġ�T����������ת���µĶ������롣
������VRML V2��0 utf8
����DEF T Transform��
����center 0��2 0
����children [
��������Shape��
������������geometry Box ��size 1 4 1 ��
������������appearance Appearance��
����������������material Material��
��������������������diffuseColor 1 0 0
����������������
������������ ��
����������
��������Transform��
������������translation 0 2 0
������������children [
����������������Shape��
��������������������geometry Box ��size 3 1 1��
��������������������appearance Appearance ��
������������������������material Material ��
����������������������������diffuseColor 1 0 0
������������������������
������������������ ��
�������������� ��
����������]
��������
����]
������
����DEF P OrientationInterpolator��
����key [0��0��5��0��8 1]
����keyValue [0 1 0 0��0 1 0 1.57 0.577 0.577��0.577 2.07��0.577 0.577 ��0.577 2.07]
����DEF TS TimeSensor
����stopTime ��1
����loop TRUE
����cycleInterval 5
������
����ROUTE TS��fraction_changed TO P��set_
����ROUTE P��value_changed TO T��set_rotation
���������У������λ��0 1 0 0��ʼ��������ʱ��ﵽһ���ʱ��0��5�������������Y����ʱ��90����ת��0 1 0 1��57������ʱ��ﵽ0��8����ʱ�����������Z��˳ʱ��90����ת��0��577 0��577 ��0��577 2��07����Ȼ���ȶ���ʱ������1��������������������ʱ����TimeSensor�ڵ��е�cycleInterval��ֵ�����ƣ�������������ת���¹��̺�ʱΪ5s��
����2����1���򵥵��������Ϸ�ӳһ�ε�Ӱ��
����Shape��
��������Appearance Appearance��
������������Material Material�� ��
��������texture DEF M MovieTexture��
������������url ��unit_test��mpg��
������������stopTime ��1
������������loop TRUE
��������������
������
����geometry Box
��
����3�����Ӿ���ϷDOOM�е�1������Ϊ�����������������������ǹ������ʱ���������1����������ȥ���й��̣������Ҳ��������������������12����̬ͼƬ���ɣ�ÿ��ͼƬ��1����ɫ��Ҫ�ﵽԤ�ڶ���Ч������Ҫ��һ��ͼ���֪���û����ĵ��������Ȼ����һ��ʱ��������л���ɫ��ֱ�����һ��ͼ�������û���������Ļ�Ͽ���������ǹ��ȥ������������VRML�ļ��������£�
����DEF TS TouchSensor
����DEF MySwitch Swich
��������whichChoice 0
��������choice [
����������������Shape ��
������������������Appearance Appearance ��
������������������texture ImageTexture ��
����������������������url ��monsterl��gif��
������������������������
����������������������
��������������������geometry DEF IFS IndexedFaceSet ��
��������������������coord Coordinate ��
��������������������������point [��1 ��1 0��1 ��1 0��1 1 0����1 1 0]
����������������������
��������������������coordIndex [0��1��2��3]
��������������������
������������������
������������������������������ͬ��Shape�ڵ㣬url������Ϊ����ͼƬ�ļ�monster2��gif��monster12��gif��������������
������������]
������
����DEF Time TimeSensor ��
��������cycleInterval������������0.7
������
����DEF MyScript Script ��
����eventIn SFFloat fraction
����eventOut SFInt32 whichChoice
����url ��vrmlscript��
������������function fraction��value�� ��
������������������whichChoice��value * 8��
����������������
������
����ROUTE TS��touchTime TO Time��startTime
����ROUTE Time��fraction_changed TO MyScript��fraction
����ROUTE MyScript��whichChoice TO MySwich��whichChoice
����4��ʹ�����������ٲ��ļ򵥵Ŀ�ܴ���
����Group ��
�� ����clildren Shape ��
������������appearance Appearance ��
����������������texture ImageTexture �� url ��water��jpg���
����������������textureTransform DEF TT Texture��
����������������������������Transform ������������
��������������
������������geometry Extrusion ��������
����������
������
����DEF TS TimeSensor �� ��
����DEF S Script ������������
����ROUTE TS��fraction_changed TO S��fraction
����ROUTE S��translation TO TT��set_translation
3 ������
����VRML2��0�ṩ�ļ��ֹ��춯̬����ģ�͵ķ������ֱ������ڲ�ͬ���ϣ�����������ʱʹ���ӵ��ƶ���������̬Ч�����ڻ��Ʋ������Եĺ���ʱ������������ƶ���������ʵ�ȡ�
��������������ӿ��Կ��������󶯻��Ŀ�ʼ�ͽ��������ɽڵ�Timesensor�����������󶯻��Ĺ켣���ɲ�ֵ���������ģ������Ƕ����ƶ������ӵ��ƶ��������ڶ����ϰ�װ��Ӱ��ʹ�ý�ɫ���г����л����������궯����3�ֽ�����ʹ����������ж�̬Ч������������ʵ�Ķ���λ�ñ任������ˣ�����˵�����ֲ�ֵ��Ϊ�û����ǧ�˰�̬�Ķ���Ч���ṩ�˻������Բ�ֵ�������ʹ�ÿ���ʹ�����������������������ͻ�����
�������ɶ����ӿƼ���ѧ΢�ͻ��о�����610054��
Ԭ�괺���ɶ����ӿƼ���ѧ΢�ͻ��о�����610054��
�ո����ڣ�1999��07��06
