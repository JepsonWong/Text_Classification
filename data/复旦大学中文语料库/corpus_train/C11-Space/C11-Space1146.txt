航空工艺技术
AERONAUTICAL MANUFACTURING TECHNOLOGY
1999年 第2期 No.2 1999



控制和预测焊接质量的计算机可视系统

Э.А.格拉德柯夫　Р.А.彼尔柯夫斯基　А.В.马罗列特柯夫［俄］
　　[摘要]　介绍了控制和预测熔焊质量的计算机可视系统的结构和技术特性。该系统能在航空、航天、原子能等部门的重要焊接结构的质量保证方面发挥明显作用。
　　关键词：计算机可视系统　激光显微光波干涉传感器　关系数据库　神经网络模块
Computer_Visual System for Controlling and Predicting Welding Quality
　　[ABSTRACT]　The structure and technical features of computer_visual system for controlling and predicting fusion welding quality are introduced. This system can play a distinct role for quality guarantee on important welding structures of aviation, aerospace and atomic energy industries.
　　Keywords: Computer_visual system　Laser profilograph sensor　Relational database　Neuron network module
　　在航空和航天部门，焊接广泛应用于制造各种材料的零部件。这些产品的极端重要性对焊接接头的质量提出了很高的要求。由于接头形成过程中存在着大量降低接头质量的干扰作用，仅仅依靠正确选择焊接工艺和规范来满足这些要求实际上是困难的。要完全避免干扰因素的出现，即使生产技能进一步提高也不可能。因为质量经常被产品本身(不同的材料，复杂的几何外形和结构)、产品在焊接中发生的物理过程(产品的变形和翘曲，材料热物理性能和化学成分的变化等)、焊接设备及自动控制系统等因素所制约。实际上，按照一系列综合使用指标――接头强度、热及抗腐蚀稳定性、抗裂纹稳定性、有否气孔与杂质之类潜藏的缺陷等来控制焊缝质量的问题并未解决。因此，为了从本质上提高重要航宇产品焊接件的可靠性，完善焊接质量的控制技术是一个很迫切的任务。
1　系统结构
　　在以Н.Э.包乌曼命名的莫斯科国立技术大学里，研究了计算机可视系统的基本模型，并用它来控制和预测各个工业部门重要产品的焊接质量。该系统是一个控制焊接质量的三回路系统(图1)。它含有控制加热源运动轨迹的回路Ⅰ、为保证优质焊缝成形的参数控制回路Ⅱ及预测在各种干扰作用下所产生缺陷的回路Ⅲ。还研制了可以控制熔焊过程的仪表和软件，以便在有各种干扰时能获得优质的接头。根据对接头的要求和焊接设备的功能，可视系统能使焊缝单位长度所需的能量、热源总量、熔透等得以稳定，控制金属转移并按数学模型实现接头几何形状的控制。

图1　控制焊接质量的三回路系统
Fig.1　Three_loop system
for controlling welding quality
　　可视系统的组成包括对接处参数、焊接设备工作规范、加热源参数及获得焊缝参数的传感器，信号转换器，计算机及其软件，计算机同设备联系的模块，功率放大器和执行机构。
　　(1)为了测定焊前对接处的几何形状和形成的焊缝形状(上面宽度和突起高度，下面宽度和下坠)，采用了按三角测量原理工作的、用激光照明的电视显微光波干涉传感器(图2)。利用功率为5?mW，有圆形光柱的连续氦-氖激光器作照明。影像(图3)由电视摄像机传送。该机配有能滤去激光射线光谱的滤光镜。视频信号进入计算机电视影像输入板并在那里变换成数字形式。传感器的特点是在变换器中采用Analog Devices公司的AD775高速АЦП(模块)。它可以按256种不同的灰度级别展开成512×512点的电视画面。当照明源与电视摄像机轴线间的角度不大时，能得到很高的测量精度并易于将传感器放在焊接可视系统中。在初步处理影像后，便可以用软件计算对接处的几何形状，精度为0.1 mm。

图2　对接处几何形状和焊缝形状传感器
Fig.2　Sensor for butt_joint geometry and weld shape

图3　激光显微光波干涉传感器工作时监视屏上不同类型对接处的影像
Fig.3　Image of different sections of butt_joint
on the monitoring screen when laser 
profilograph sensor is working
　　显微光波干涉传感器的技术特性：
　　　　垂直坐标测量精度　　0.1 mm
　　　　垂直坐标测量范围　　15 mm
　　　　水平坐标测量精度　　0.05 mm
　　　　水平坐标测量范围　　20 mm
　　　　视觉范围　　　　　　20 mm×30 mm
　　　　画面处理时间　　　　0.1 s
　　　　至表面的距离　　　　100～500 mm
　　(2)为测定焊接时电极和对接处的相互位置，采用了以电视摄像机为基础的传感器(图4)。电视摄像机配有能使视觉范围内的目标对比均匀化的专用光学附加镜，可同时在监视屏上观察到对接处、电弧、焊接熔池和电极，以测量逼近电弧的电极与对接处的相互位置、对接缝宽度、电极在焊件上的高度及边缘错位。电视摄像机要牢牢固定在距电弧200～500?mm处或焊接机头上。要注意保护，使其避开金属蒸气和飞溅，并避免传感器影响焊接工艺过程。焊接时，可借助光缆在传感器难以到达处或直至离焊接高温区几米远处向电视摄像机发送焊接区图像。标准的视频信号数字化后存入计算机。在波幅法和梯度法的基础上，软件可以确定参数及对接处与电极的位置。
　　视频传感器的技术特性：
　　　　测量精度/mm：对接缝宽度　　 0.05
　　　　对接缝偏差　　　　　　　　　0.05
　　　　对接缝错位　　　　　　　　　0.2
　　　　边缘错位　　　　　　　　　　0.2
　　　　测量范围/mm：对接缝宽度　　 0.05～3
　　　　对接缝偏差　　　　　　　　　±8
　　　　对接缝错位　　　　　　　　　±2
　　　　边缘错位　　　　　　　　　　±2

图4　焊接时测定电极和对接处相互位置用的传感器
Fig.4　Sensor for measuring of mutual alignment 
of electrode and butt_joint during welding
　　(3)为联接计算机、标准传感器和焊接设备，采用了各种模块形式的目标接口装置(УСО)。它们可以装在计算机内，也可以接到传感器上。接至计算机的模块制成标准板形式并装到空位槽上，再与计算机的电源接通。工艺板包含16通道的模拟多路调制器、有放大编程系数的精密微分放大器、12位模拟数字转换器、控制测量的逻辑电路、4个12位数字模拟转换器和16位输出/输入寄存器ТТЛ。有了输出缓冲模拟信号就可以控制各种传动，入口和出口的数字线用作查询分立的传感器并控制继电器的输入。
　　目标接口装置(УСО)的技术特性：
　　　　输入模拟通道数　　　　16
　　　　模拟数字转换器位数　　12
　　　　1个通道转换时间　　　 2 μs
　　　　入口电压最大范围　　　-10～＋10 V
　　　　放大系数值　　　　　　5
　　　　输出模拟通道数　　　　4
　　　　数字模拟转换器位数　　12
　　　　АЦП转换时间　　　　0.5 μs
　　　　ЦАП出口电压范围　　±10 V
　　　　分立线路(ТТЛ)数量：
　　　　　　入口　　　　　　　16
　　　　　　出口　　　　　　　16
　　(4)为与标准设备和传感器相联接，研制了配有计算机单晶INTEL8751的小型(55 mm×55 mm)模块АЦП和ЦАП。模块АЦП可以将4种模拟信号转换成精确度为12位的数字信号，将它们进行预处理并沿标准序列通道将数值传送到主计算机。模块ЦАП可以沿序列通道从计算机接收数据并发出2种控制模拟信号。2种模块都有双向8位门。借助于这些模块，可以将来自标准传感器的信息(焊接电流、焊接速度、电弧电压、供丝速度、保护气体消耗、焊接熔池温度等)以数字形式输入计算机。已研制的模块能保证可视系统与任何焊接电源和自动焊机相联接。
2　系统软件
　　软件采用Pascal编程语言，汇编程序利用标准程序EXCEL和FOX_pro。所有关于过程运转的信息，存入由信息参考和记录部分组成的关系数据库，其中的第一部分是EXCEL格式的电子表格，表中载有关于焊接规范与接头类型、材料、气体、填加焊丝关系的参考材料。焊前先定出原始数据，所需要的焊接规范便自动从数据库中选出。记录部分是一种专用的数据库，在运行状态下，它可以从频率不大于10 Hz的传感器上取出数据并保存在用于各种情况、独立的专用表格型文件中。对三回路控制系统中的成形回路与缺陷回路而言，这个文件是输入的。在每一步算错后，由预测的正常指标来补充。
　　软件结构包含4个基本模块：
　　(1)关系数据库的信息参考部分控制模块，它可以在对话状态下校订(补充，修正，复制，取消)有关焊接规范与接头类型、焊接方法的参考数据。

图5　按标准模块预测焊接质量
Fig.5　Predicting welding quality according
to the standard module
　　(2)控制焊接工作循环的模块。它在焊前以程控手段定出焊接规范和质量控制系统的工作方式、传感器的灵敏度和参数、视频影像识别特性，控制过程运转监视屏上的工作循环和映像。
　　(3)焊接过程中的质量控制模块。它从传感器获取信息并控制焊接规范，以保证在有各种干扰时获得优质接头。在运行状态下，焊接区的伪彩色视频影像显示在计算机的显示屏上，包括焊接电流和速度、质量区域外貌及工作点的位置、电弧电压、对接处断面、电极运动轨迹、间隙值、焊缝形状、影像识别系统工作结果、过程时间、工作循环及工作点在其中的流动位置和可能出现的缺陷信息。焊接是自动完成的，但如规范与标准值有较大偏差或出现不能容许的缺陷时，操作员可以干预这个过程。
　　(4)分析焊接质量的模块。借助于这个模块，可以在监视屏、磁存储器或纸带上得到焊接质量的记录。有了记录，就获得了每一个产品的质量证明，并可以分析过程的运转状况。
　　研制的软件可以按4种规范实现焊接控制：
　　(1)借助于显微光波干涉仪，可以按焊前测得的对接处几何形状并利用预先训练过的神经网络模块(模拟仿真)预测焊接质量。在此场合，焊前进行试验通道时，对接处的参数即记录于数据库的记录部分中(图5)。这些作为输入文件的数据和来自数据库信息参考部分的规范基本参数数据随后便进入预测缺陷回路的入口。该回路中有预先训练过的神经网络模块。
　　在特征(优质焊缝，烧穿，未焊透，咬边，裂纹)可变的模块出口上，形成未来焊接接头的焊接质量点状记录，记录点间断1～2 mm。分析所得的数据，即可作出在给定条件下能否获得优质焊接接头的结论，如果能够得到优质接头，那么就可以在标准规范下完成焊接。在记录接头参数的基础上，轨迹回路保证加热源对准接头的中心。如果在某些点上可能出现缺陷，可以利用成形回路在重复模拟仿真阶段校正焊接基础规范，并形成焊接质量新的记录。分析记录以后，即可作出决定：或者进行校正规范的焊接，或者因对接处几何形状过分偏离要求值而需要校正焊接装置。
　　(2)按系统的工作规范焊接。在这种情况下，按编制的工艺进行焊接。在运行状态下，过程参数、对接处参数和焊缝形状记录在数据库的记录部分(图6)，这样可以获得每一个零件的工艺证明，这在生产重要产品时是必需的。必要时，焊后也可据此分析产生缺陷的原因。

图6　可视系统工作的信息状态
Fig.6　Information status when visual
system is working
　　(3)在焊接过程中，根据控制系统回路中的标准模块来控制焊缝的成形(图7)。在此方案中，焊接过程中热源位置控制靠轨迹控制回路来实现。成形回路是一个控制神经网络模块，需要预先进行训练：输入参数取自数据库信息参考部分的原始数据、传感器测量的过程参数、对接处的几何形状及电极与对接处的相互位置，而其输出参数是焊接电流和速度。在工作过程中，应保证焊接电流和速度的控制。在这种控制下形成的焊缝，其几何形状最接近于规定值。缺陷回路是用工作在运行状态下的预测神经网络模块来完成的。模块的输入数据是标准控制模块的输入与输出数据，而输出数据则是焊缝中缺陷的概率指标。在焊接过程中，操作员能得到可能出现缺陷的信息，必要时可以采取停止运行过程的措施。

图7　按标准模块控制焊接质量
Fig.7　Controlling welding quality according
to the standard module
　　(4)用可变输入的神经网络模块来控制焊接质量(图8)。在这种情况下，轨迹回路将加热源瞄准对接处。成形控制由神经网络模块来实现。在模块的入口，除规范和对接处的参数外，加上了实际成形的焊缝参数(焊缝宽度，突起值，咬边的有无和大小)。神经网络模块训练要考虑可变(在过程中的变化)输入以及未检测到的干扰进行补偿，以便拟出所要求的焊接电流和速度的控制作用来补偿未检测到的干扰(被焊材料热物理参数，传热条件，填加焊丝的形状和化学成分，环境介质的温度和湿度等的变化及电极腐蚀)。出现缺陷的概率由预测神经网络模块来决定。在模块的入口，输入完整的过程运转信息和由控制模块产生的成形控制作用。

图8　按照有可变输入的神经网络模块控制焊接质量
Fig.8　Controlling welding quality according 
to the neuron network module with variable input
3　结束语
　　计算机可视系统在АОЗТ联合体(КОМПОЗИТ)已用作运载火箭外壳的环缝和纵缝焊接(铝合金多层焊)，在“НИКИМТ”用作控制反应堆零件的焊接(高合金钢件，对接与搭接接头)，在莫斯科制管厂用于不锈钢管的直缝焊接。
　　系统适用于各种类型接头的弧焊、电子束焊和激光焊接的质量控制技术作业。
　　综上所述，可以得出以下结论：
　　(1)控制焊接过程的计算机可视系统可以提高存在不同类型干扰作用时的焊接质量。
　　(2)借助于所研制的传感器，可以获得焊前对接处和运行状态下的完整信息。
　　(3)已研制的接口装置实际上可以使系统与任何焊接设备实现联接。软件在分析干扰矢量各分量数值的基础上，能选择最佳控制规律，保证获得优质焊缝。
　　(4)系统可以全面评价焊接过程，并能得到每个零件的工艺证明。
　　(5)在控制和预测焊接质量的系统中，神经网络模块的应用是很有前途的。
(许贵芝译自Сварочное　Производство.
1997(7)：40～44　刘家富校)
(责编　文　洵)
