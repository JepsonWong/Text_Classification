信息与控制
INFORMATION AND CONTROL
1999年 第28卷 第3期 Vol.28 No.3 1999



基于自治及合作的整子制造系统*
王成恩　程凯
　　摘要：整子制造系统是智能制造计划中提出的一种未来的制造模式，本文对其概念、理论和研究状况进行了介绍和分析．整子是构造制造系统的一种模块，它具有自治性及合作性，而整子制造系统则追求快速适应环境变化的能力．整子制造系统采用了一种松弛的动态递阶控制结构．目前整子制造系统仍然处于对“下一代制造模式”的研究阶段，离实际应用还有一定的距离．
　　关键词：自治，合作，整子制造系统
　　中图分类号：TP11　　　　　　文献标识码：A
HOLONIC MANUFACTURING SYSTEMS BASED
ON AUTONOMY AND COOPERATION
WANG Chengen　CHENG Kai
(Shenyang Institute of Automation, Chinese Acadeny of Scinoe, Shenyang 110015)
　　Abstract　This paper introduces and analyzes the related concepts and current development status of Holonic Manufacturing Systems, which are proposed by the IMS Programme as a kind of future manufacturing paradigms. Holons with characteristics of autonomy and cooperation are considered as the basic components of manufacturing systems, allowing Holonic Manufacturing Systems capability to adapt to fast environmental changes. It is concluded that Holonic Manufacturing Systems adopt a slacked dynamic hierarchy and that Holonic Manufacturing Systems are still in a phase of research and far from wide application in industries.
　　Key words　autonomy, cooperation, holonic manufacturing systems
　　1　引言
　　伴随着全球统一大市场的逐渐形成，企业竞争的加剧，用户需求的多样化，市场环境的快速变化，传统的僵化的制造模式已经不能满足制造业的需求．制造企业只有抛弃大批量生产方式，才能突破环境及经济因素的限制[1]．于是人们探讨一种能适应未来需要，对湍动市场做出积极有效反应的新的制造模式．在日美等国发起的IMS计划当中，Holonic Manufacturing System(HMS)是比较有影响的一种思想，它与敏捷制造的出发点基本是相同的，但前者更偏重于利用人工智能技术研究新的未来灵活制造模式，而后者更侧重于利用现有技术，强调人在企业制造系统中的能动协调作用，不但实现资源的集成，更重要的同样是构建灵活的系统．它们二者都十分重视人在制造系统中的作用，都强调如何把基于功能的系统构建方法迁移到基于过程、知识的方法上来．HMS关心的是如何有效形成企业的协作文化，而非泰勒的功能细分的方法，从而使制造业从“命令-服从的”的模式解脱出来，转向“合作、创新”的模式．
　　2　HMS的基本概念
　　2.1　HMS构成元素
　　HMS的基本构成元素称为holon，它是由Koestler在“机器的灵魂"一书中最先提出来的．Holon是由希腊语中“holos(整体)”加上后缀“on（粒子或部分）”构成的．Koestler认为如果存在稳定的中间形态，简单系统可以快速演变和发展成具有递阶结构的复杂系统．其次，在分析有机物及社会组织的递阶结构和稳定的中间形态时Koestler发现虽然很容易辩识“局部”或“部分”，但是绝对意义上的“整体”和“部分”是不存在的．因此，他提出Holon以反映实体同时具有“整体”和“部分”性质的特点；即Holon对其组成部分而言是整体，对其上级而言是部分[2]．Holon目前没有统一的中文译名，有人将其音译为“合弄”， 将HMS译为“合弄制造系统”，也有专家建议作者将HMS翻译为“自律制造系统”．但是，本文采用“整子”表示其“整体-部分”的含义，将HMS称为“整子制造系统”．每个整子具有一定的自治性，同时又接受上级的控制，若干整子组成整子系统（holarchy）．整子具有三个本质特点：合作性、自治性、智能性．（1）自治性是指每个整子可以规划自身活动，可以对意外事件作出反应，并且行为可控．（2）合作性是指每个整子可以请求其它整子的服务，也可以根据请求向其它整子提供服务．由于整子有功能上的冗余，或者说有能力交集，必要时整子间可以互相替代，这种替代既可以是主从的，也可以是对等的[3]．整子之间相互替代完成某些服务有利于最大程度地利用资源．（3）智能性是指holon能够使用启发式算法进行推理[4]．有的研究者没有把智能性单独列为整子的本质特点[5]，大概是考虑到前两个性质本身就是以智能性为前提的．
　　研究人员将Koestler提出的关于社会组织和有机物组织的概念恰当地转换为一整套制造业的概念体系．制造业人士利用整子系统表达了一种对理想制造模式的追求，反映了一种制造理念．目的是在制造业中获得整子组织带给有机物组织及社会领域那样的优点：抗扰动的稳定性、对变化的适应性、灵活性，以及有效利用资源．研究人员根据制造业背景对整子概念及应用进行了定义．
　　(1)整子：是构造制造系统的一种模块，它具有自治性及合作性，可以转换、运送、存储、和/或处理信息及物理对象．整子包括一个信息处理部分和一个物理处理部分，一个整子可以包含另外的整子．有效的信息处理能力是其三个本质特点的保证，物理部件则既是整子信息处理能力的支撑基础，也是整子与外界（与其它对等整子或与外部环境）进行必要物质、信息和能量交换的载体．
　　(2)整子系统：是一个通过整子的合作达到某些目标的系统；整子系统定义了整子间合作的基本规则因而也就限制了其自治性．
　　(3)整子制造系统（HMS）：是一种实现敏捷制造企业的整子系统，它集成了全部制造活动，从订货贯穿设计、生产、以及销售．
　　整子与一般的系统功能构件有本质的区别，后者只能被动执行上级的命令，当资源冲突或不满足约束条件时，只能等待资源释放或新指令．而 整子在遇突发事件时有不征求上级而直接处理事件的能力[5]．“突发”的环境变化包括：（1）制造资源和制造要求的变化；（2）HMS中的过程故障及设备的故障．整子具有执行本地智能决策，选择候补方案或与同一级整子直接协商、并委托其执行的能力．
　　2.2　整子的分类和内部结构
　　按照应用领域，整子可以划分成不同的类别．例如，在一个轧钢厂的故障诊断系统中，整子被划分成以下九种类型（如图1所示）[6]．（1） 过程处理整子，负责执行一定的算法（如控制、计划），必要时进行模型计算和辅助计算．任何构成整子主功能的子功能都包含在处理整子中．（2） 谈判整子负责整子间的合作行为，在满足全局最优与局部最优间做出平衡．每个整子将得到一个全局目标，其局部目标由分布式谈判优化技术来决定．（3） 调度整子在给定的生产参数下调度整子活动以满足HMS全局目标．（4） 数据库整子负责历史数据和信息的存储和访问，对状态监控、谈判和系统调节等任务提供决策支持．（5） 诊断整子进行系统故障监控和诊断，甚至排除功能．（6） 构形整子按要求进行系统重构，它能够检测整子的删除或新整子的加入，并根据需要加入合适的输入输出整子和代码．（7） 恢复整子对系统运行过程中产生各种差错进行管理控制．（8） 输入/输出 整子为每个整子提供信息和数据的输入输出渠道．（9） 跟踪整子对每个整子操作顺序以及它的环境进行同步协调．


图1　整子分类
　　这种整子类型划分方法体现了信息处理和计算机软件的观点．另外，也可以根据制造系统的构成要素进行划分．例如，一个柔性制造系统中，整子被划分成五种类型[7]．（1）工件整子在全部生产过程中负责工件相关的事务．在调度阶段它与各种设备进行谈判，在运行阶段对加工和运输活动进行监控和协调．（2）虚拟制造单元 整子控制一组物理设备，规划制造方案．（3）刀具管理整子管理刀具库的活动，并且进行刀具分配．（4）AGV 整子负责AGV小车的自动控制和调度，（5）路径整子通过令牌分发控制AGV车流（多个AGV时），并记录轨道上活动态AGV的位置．而在比利时开发的机器人装配实验系统中，整子按照应用功能被划分成以下五类：连续过程整子、加工整子、装配整子、运输整子和系统优化整子[2]．
　　整子的内部结构充分借鉴了分布式人工智能中多agent的结构，甚至在许多情况下整子与agent是完全等同的．整子模型包括如下模块：建议模块：对来自上级或同级的请求进行分析；从功能模型观点提出可行的活动建议．计划模块：根据建议模块的申请，尽力作出活动计划，即该整子能够执行的活动序列．但是，计划模块不负责资源分配．请求模块：向下级或同级发送活动请求并在获得反馈建议后决定哪一个下级（或同级）执行请求．执行模块：负责执行事件流，它实时处理各类事件信号、激活/开始信号和中断事件信号等．监控模块：负责观察过渡状态中系统是否满约束/条件．控制模块：一种事件处理者，它控制整子的内部行为．它可以允许并行执行计划，协调和监控等功能．
　　3　HMS的结构及运行机制
　　3.1　整子制造系统（HMS）结构
　　到目前为止，制造系统基本上有三种控制结构：集中控制结构、递阶控制结构和变态控制结构(Heterarchical Architecture)．早期的制造系统一般采取静态集中控制结构，其特点是具有刚性、稳定性但缺乏自我变化能力．集中控制结构基本采用一台主计算机完成全部信息处理和决策控制，制造系统的全部数据存储在一个全局数据库里．目前的制造系统多采用递阶控制结构，它是依据“控制层”的思想进行构造的，其中各控制模块排列成金字塔形式．递阶控制结构将复杂任务分解成一系列简单的子任务，形成若干控制层完成特定的子任务．变态控制结构将系统分解成近似独立的实体，实体通过预先定义的通信接口进行合作．实体之间消除主从关系，具有局部自治性，系统构形对实体是透明的， 实体需要与其它实体合作．在变态控制结构中系统的实体具有高度自治性，可以快速响应环境变化，但是也容易导致混沌状态．
　　HMS的结构具有两个显著的特点．第一，系统内全部整子原则上都是平等的，不存在严格的上下级关系．每个整子具有较高的自治性，可以独立地作出运行决策，并且执行和控制所作的决策．第二，整子系统中存在明确的规则限制整子的自由度，保证整子之间可以相互合作．一组整子可以就某个任务通过协商，制订相互可以接受的方案，并且合作执行这些方案．这样在整子系统中整子之间存在着“包含”关系，即整子可以循环递归定义．例如负责AGV的整子可以包含有过程处理整子，I/O整子，数据库整子等．不仅通用支持整子与具体功能整子之间存在包含关系，而且具体功能整子内部也存在包含关系．库存管理整子是一个具体功能整子，采购整子也是功能整子．当前者接到后者的信息后，激活自己的数据库整子看有没有符合要求的产品，假如有则交付产品并将信息传给采购整子，假如没有就激活负责产品生产的整子．这时数据库整子就“包含”在库存整子中，并且为其服务．整子之间的包含与被包含关系表明在某一稳定时间段整子间具有上下级关系，被包含的整子向“包含”它的整子提供服务．
　　在HMS中整子的集合形成了整子系统结构，各个整子以系统目标为指导，以协作交流为手段规范自身行为(图2)．


图2　整子系统结构示意
　　HMS结构是基于一种协作对等的结构，总的看来各个自治单元即整子之间是平等和协作的关系．在HMS中一个“伺服”整子只要不发生资源冲突就可以服务于多个其他整子，并且，在资源冲突时整子之间可以通过谈判协商达成一致．由于整子具有智能，它可以独立提出备选方案，以及进行任务分解和转包等．功能整子之间也能够通过协议、谈判为共同的理想（某一层次上系统行为最优或近似最优）而采取适当的活动，同时向外界输出信息、物质、能量．处于被包含层次的整子不同于传统结构中从属地位的子模块，它从属关系是暂时的．外部环境变化或者系统内部条件变化时，先前从属的整子可能变为平等的甚至是主人的地位，也可能从运行动态结构中消失，还可以有新整子的加入．这些特点都体现了整子模式下企业重构的灵活性．这种动态重构、动态分级的特点正是HMS优于传统模式之处．整子之间的内部作用、信息约束以及整子的智能特征决定了它在系统中的动态定位，这个动态稳定点反映了产品在其适应市场的生存周期内基本稳定的特征，它不仅保证了鲁棒性，也是有效监督、诊断生产过程，监督质量所必须的．在整子的结构示意图2中，圆角矩形和椭圆形表示在某一时刻下各个层次上的整子．双箭头表示对等合作流，既包括信息、物流，也包括控制流．单箭头表示主从关系．虚线及黑点指出了说明项的作用域．这里，我们可以看到各整子存在包含与被包含的关系，为了达成全局目标，它们之间有相互合作，同时，它们也审视来自上级的建议，并受到各种规则的约束．
　　当然，整子系统结构的灵活性是有一定限度的．系统的无限灵活意味着过度敏感，会使鲁棒性降低，容易造成脱离平衡点的混沌状态．客观上它也必须遵从企业环境（全局环境）以及整子的能力，整子环境（局部环境）之间错综复杂的约束关系．比如在车间级装配线整子中，智能机床整子的加工能力，零件的装配顺序，制造计划，任务调度必须遵循物理、功能、工艺上的限制．
　　3.2　整子制造系统（HMS）运行机制
　　整子象生命体的组织细胞一样，有产生、发展、消亡的过程．在HMS中整子既是自治的个体，又在复杂的环境中不断与外界进行着信息能量和物质的交换．与多agent系统相似，整子之间通信可以分成两类：直接通信和间接通信．直接通信包括广播方式和点到点通信；间接通信则通过专门负责通信的中介整子进行转发．HMS运行机制主要包括系统中整子之间的谈判协议和协商合作策略．谈判协议信息类型和收发信息的次序等．一般，HMS中整子间的谈判协议采用合同网协议（Contract Net Protocol），合同网是一种影响较大的关于分布式问题求解的通讯协议[8]．在这种方法中，合同的管理者将任务分解成子任务，然后通过广播方式进行招标．其他的成员收到信息后可以投标竞争，管理者根据全局目标进行分析和选择最佳的合作伙伴．HMS中多个对等整子间成倍增加的大量信息流是解决问题的瓶颈之一．它有赖于通讯技术的发展，而合适的信息处理算法也尤为重要．有人提出设置信息代理（Agent）的思路来简化信息流量．由于整子的能力有冗余，人们借鉴成组技术的思路，把具有能力交集的整子组合成一些特征组，每个特征组设置一个代理，当要进行任务调度时，申请服务的整子只需要将消息发给代理 ，由代理来扫描其所辖整子的能力特征域，从而判断和进一步将消息发放给其中的某些整子，这样就避免了消息盲目传递带来的信息激增．
　　HMS的最基本的优点是整子之间可以相互合作完成系统的全局目标．协商合作策略规范系统内整子之间的交互和行动，优化HMS的系统目标．由于整子具有自治性和能力冗余，整子间会出现资源冲突和任务竞争，协商合作策略提供相应的规则消除资源竞争和分配任务．HMS运行过程中，整子的局部目标（自身利益）会与系统全局目标（合作利益）产生矛盾．此时HMS可以采取以下策略决定是否合作．
　　(1)全部合作，自我利益是第二位的；
　　(2)完全自我利益，合作是第二位的；
　　(3)完全自我利益，没有第二位的合作；
　　(4)完全合作，没有第二位的自我利益；
　　(5)合作和自我利益相混合.
　　一般情况下，HMS中采取第4条策略，即完全合作．也可以根据情况采取多种协商合作策略．HMS协调机制保证制造系统能快速进行设计与实施，对于快速变化的制造要求具有快速的适应性．整子间的高度协作对于产品设计变化和批量变化具有快的自组织适应能力．HMS对自顶向下的扰动（象市场环境变化、比如订货的变化）和自底向上的扰动（比如设备故障、物流、信息流的阻塞）都具有较好的抗扰能力．HMS的协商合作机制保证快速变化的前提下避免系统过于敏感发生无序变化，而导致系统脱离平衡点而崩溃．HMS协商合作机制的研究始终围绕着一个核心：即追求动态、快速、有效自组织，实现企业结构重构．
　　4　HMS的应用实验
　　HMS和CIMS一样体现着一种哲理，它将把最新的理论、方法和软技术容入到自己的体系中去．目前在国外HMS还没有真正用于实际的生产系统，还处于探索阶段，已经建立了几种典型的HMS应用实验系统，其中包括机器人柔性装配线、钢铁厂轧钢系统等，并与传统系统进行了仿真对比，获得了一些有意义的数据，得出了可行性结论．
　　芬兰研究人员以实际的机器人加工单元为背景建立计算机仿真系统，该系统物理上由两台连网计算机工作站组成[3]．其中一台SGI工作站用来模拟机器人加工单元，这个虚拟单元包括：两台Aitec ARS10机器人（含夹持工具）、一台塑料注模成型机、一台焊接机、一组传送皮带和一台AGV．另外一台SUN工作站用于建立控制系统，验证HMS的通信、谈判和协调机制．整子间通信以合同网谈判协议为基础，任何任务只有在请求获准后才能执行，整子间通过请求-应答方式建立合同．合同签定的任务计划被保存在已接受任务列表之中，就可以通过调度命令来执行了．HMS自治性保证对异常情况有较强的适应能力，当某个整子出现故障不能完成给定任务时，计划者重新发出请求消息，与另外的整子签定合同．
　　另外一个具有影响的例子是比利时研究人员开发的机器人柔性装配线实验系统[9,10]．该系统包括四台装配机器人和一个传输系统．传输系统包括一个核心环和每个站点的FIFO型缓冲区．控制系统决定托盘是否进入、通过或离开某个站点．系统同时装配两种不同类型的产品．针对四种不同的情况，研究人员将HMS与递阶控制结构和变态控制结构进行了比较．实验结果表明，在正常情况下，HMS的运行效果要比其它两种系统的运行效果差，而在环境和系统内部发生变化时HMS的运行效果最佳．
　　5　结论
　　通过对智能制造（IMS）计划提出的整子制造系统概念、理论和实验情况分析，我们可以得出以下结论．（1）整子的概念在哲理上反映了整体与局部的辨证观点，整子制造系统则反映了快速响应变化的需求．（2）整子制造系统的追求基本特点是自治性及合作性．整子在具体实现方式上与分布式人工智能中agent十分相似．而且，目前的整子制造系统的实验系统全部是借助于多agent系统技术实现的．因此，整子制造系统的自治性及合作能力依赖于分布式人工智能技术的支持．（3）在HMS并没有完全消除整子之间的主从约束关系，只是将主从约束进行了松弛．HMS控制结构实际上是递阶控制结构和变态控制结构的折中，是一种松弛的动态递阶控制结构．“松弛”表示上级的指令是非强制，只是一种建议．“动态”表明整子间的主从关系是变化的和不固定的．所以，HMS反映了在智能和自治性的基础上制造系统动态重构造思想．（4）自治性及合作性增大了系统通信流量和谈判决策难度，HMS系统复杂性按非线形规律上升．HMS的研究还处于起始阶段，目前无法在大中型制造系统中实际应用．因此，HMS体系结构、合作谈判机制、产品模型、控制策略、标准化规范和开发仿真工具等有待于进一步研究．
*中国科学院与德国合作交流项目，沈阳科技基金和863CIMS主题的资助。
作者简介：王成恩，男，35岁，博士，研究室主任．研究领域为CIMS理论及其先进制造理论等技术．
　　　　　程凯，男，25岁，硕士研究生．研究领域为可重构制造系统理论．
作者单位：中国科学院沈阳自动化研究所　沈阳　110015
参考文献
　1　 Tomiyama T. A Manufacturing Paradigm Toward the 21st Century. Integrated Computer Aided Engineering, 1997,4(3):159～178
　2　 Hopf M. Holonic Manufacturing Systems(HMS)-The basic Concept and a Report of IMS Test Case5. Sharing CIM Solutions J.K.H Knudsen et al.(Eds.) IOS Press, 1994
　3　 Tapio Heikkila. Holonic Control for Manufacturing Systems: Functional Design of a Manufacturing Robot Cell. Integrated Computer Aided Engineering, 1997,4(5):202～218
　4　 Deen S M. Cooperation Issues in Holonic Manufacturing Systems. Information Infrastructure Systems for Manufacturing(B-14) H.Yoshikawa and J.Goossenaerts(Editors) Elsevier Science B.V.(North-Holland), 1993: 401～402
　5　 Tonshoff H K. Product Modelling for Holonic Manufacturing Systems.Proceedings of the Fourth International Conference on Computer Integrated Manufacturing and Automation Technology, 1994
　6　 McFarlane. Holonic Manufacturing in Continuous Processing: Concepts and Control Requirements. Proc. ASI'95, Portugal, 1995
　7　 Amos H C Ng. HSCS-the Design of a Holonic Shopfloor Control System.Proceedings of Confernece on Emerging Technologies and Factory Automation (EFTA'96), France, 1996
　8　 Smith R G. The Contract Net Protocol: High-Level Communication and Control in a Distributed Problem Solver. IEEE Trans. Computer, 1980, C-29(12):1104～1113
　9　 Valckenaers P, Brussel H V et al. IMS TEST CASE 5: Holonic Manufacturing Systems. IFAC Intelligent Manufacturing Systems, Vienna, Austria, 1994
　10　Valckenarers P. Holonic Manufacturing Systems. Integrated Computer-Aided Engineering, 1997,4(5):191～201
1998-06-08收稿
