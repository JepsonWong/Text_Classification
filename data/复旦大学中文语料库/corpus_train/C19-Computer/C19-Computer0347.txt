计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



代理服务器在校园网中的应用
刘循　廖蓉
　　摘　要　本文分析了代理服务器（Proxy Server）的结构和在代理服务、网络计费、高速缓存(cache)、网络安全上的功能，并就校园网环境，阐述了代理服务器的应用。
　　关键词　代理服务器, 校园网, 网络管理
　　　　随着校园网的开通运行和大量计算机接入，网络规模不断扩大，网络用户日益增多，对网络可靠、安全、高效运行提出了更高要求。如何使网络计费不受IP地址混用影响，真实反映用户流量；如何加快网络浏览速度、降低不必要的出国费用；如何监控网络以了解、掌握、控制网络信息，对不良信息进行过滤，保证校园网健康应用和发展；如何有效保护网络资源，特别是校园网内部资源。这些是网络计费和网络安全要解决的问题，也是校园网网络管理的难题。代理服务器的运用可有效地解决这一难题。
　　代理服务器软件包的种类很多，有Netscape Proxy Server 、Wingate、Winroute 及华胜公司的NetGate，我校采用的是华胜公司的NetGate。 
1　代理服务器及其结构
1.1　代理服务器
　　代理服务器是执行代理服务的特殊软件包。它由服务器端程序与客户端程序组成，它一般不允许内部网（Intranet校园网）和外部网（Internet互连网）之间直接通信。若内部网用户需访问外部网，首先内部网用户应和代理服务器之间建立通信连接，然后代理服务器再与外部网的服务器建立通信连接。可见，代理服务是内部网和外部网之间的一个关联设备，如图1所示。该设备不但具有安全作用（该安全作用在网络中称为“防火墙”），而且用户必须通过它与外部通信，所以可在其上进行网络用户管理、网络计费管理、网络信息缓存及网络监控管理。

图1　代理服务器
1.2　代理服务器的结构
　　代理服务器是建立于网络的物理层、数据链路层、网络层之上的管理软件，它主要由以下几个部分构成：
　　网络层IP包过滤：网络层的IP包过滤只对包的头部信息（地址段）进行控制，对包的内容不作任何处理。包过滤是针对网络信息的目的和来源作限制，是网络信息安全的一种保障。
　　会话层的SOCKS Proxy：通过会话层的SOCKS Proxy，使客户端和代理服务器端建立通信连接。只有代理服务器端验证通过的客户才能和校园网外的服务器建立通信连接，并通过缓存实现cache功能。
　　网络监控：它包括校园网内部各子网连网机器的状态监控和目前正通过代理服务器的各源、目地IP地址监控两方面。
　　网络计费系统：代理服务器的网络计费系统主要由用户访问日志、计费标准设置、用户费用动态查询、用户费用统计构成。
2　代理服务器的主要功能
　　从以上结构分析可知，代理服务器的主要功能是代理服务、网络监控管理、计费管理。
　　代理服务　主要包括用户名管理、用户名认证及防火墙功能等。
　　计费管理　用户费用日志、用户费用统计、用户月费用限制、用户费用预交、用户费用动态查询等。
　　网络监控管理　网络监控管理是监控校园网内部各子网连网机器的状态监控和目前正通过代理服务器的各源、目地IP地址。通过对校园网内部各子网监控可了解各子网运行情况；通过对校园网内部连网机器的状态监控可确定连网机器的IP地址是否合法；通过对目前正通过代理服务器的各源、目地IP地址监控可知道当前的热门站点，以便采取相应的管理措施。
　　高速缓存　高速缓存(cache)能把通过代理服务器访问过的信息内容在自己的硬盘中保存一份,当用户下次访问相同的内容时就不必从Internet上下载,而是从代理服务器上的cache中下载。代理服务器可以配置成自动式cache功能，它能自动地定期更新cache中指定的内容，利用这一功能可减少网络使用传输流量，提高网络传输速度，节约访问时间，降低访问费用。
3　代理服务器在校园网中的应用
3.1　校园网与CERNET
　　校园网是通过光缆将校园内各干线节点连接起来，干线节点又将各大楼的局域网等连接在一起。国家教育部将我国绝大多数大学的校园网连接起来，构成中国教育科研计算机网（CERNET）。由于CERNET的特殊收费方式：既有免费IP站点又有收费IP站点，而计费是按CERNET网络管理中心的路由器上采集到的每个IP从收费站点进入CERNET的流量。但对于校园网一级的用户来说，由于IP混用存在，该计费方式不能很好地反映用户流量，目前大家认可的方式是按用户名和用户口令计费。
3.2　代理服务器在校园网中的应用
　　代理服务器用于校园网，当校园内客户要访问收费IP站点时，在出口路由器上作IP过滤，使要访问收费IP站点的用户必须通过代理服务器。在用户端，用户必须输入用户帐号和口令才能和代理服务器建立连接，也才能进行所需站点访问。系统结构方式详见图2。在代理服务器上计费系统的功能有用户费用日志、用户费用预交、用户月费用控制、用户月费用统计、用户费用实时查询等。

图2　代理服务器系统结构
　　四川大学校园网用NetGate作代理软件包，操作系统是Solarias。该代理服务器的主要功能如下。
　　访问控制　设置过滤规则；设置月费用上限；设置可信任主机；系统配置。
　　流量计费　设置域内IP地址类；设置计费标准；按IP分类统计；设置域内IP地址类；按用户名分类统计；查询日志；按用户名查询；预付款项管理；费用统计。
　　实时监控
　　网络状态
　　Internet是开放式互联网，网上不安全的信息及因素很多。代理服务器的防火墙功能可将校园网内的客户保护起来，使校园网外无法攻击校园内的用户；代理服务器的监控功能可监视校园网内外站点访问，杜绝不健康的、非法的信息；代理服务器的网络状态功能可观察校园网内用户接入情况。
4　结语
　　代理服务器是网络管理中非常重要的工具，它不仅在校园网的管理中发挥着日益明显的作用，它在整个网络领域也得到了越来越广泛的应用，同时其功能也不断完善和发展。
作者简介：刘循　工程师。主要研究方向：计算机网络管理及应用。
廖蓉　工程师。主要研究方向：计算机网络管理及应用。
作者单位：四川大学计算机网络管理中心　四川.成都（610064）
参考文献
［1］　周明天，汪文勇. TCP/IP网络原理与技术. 北京：清华大学出版社，1993
收稿日期:1999-06-07(修改稿)
