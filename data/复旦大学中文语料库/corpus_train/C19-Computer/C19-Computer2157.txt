计算机应用研究
APPLICATION RESERCH OF COMPUTERS
2000  Vol.17　No.1　P.65-67




一种异类信令系统间互联互通的实现方案
刘浩力　李 磊　施鸿宝
摘 要 在目前电信网中存在着各种不同的信令系统和不同制式的交换机，对于如何实现它们之间的互联互通，如何在现有的PSTN中扩展新的业务和增加新的功能，提出了一种基于软件方法的智能转换模型。
关键词 电信网 信令系统 随路信令方式 共路信令方式
1 引言
　　当今世界通信技术与计算机技术的飞跃发展和紧密结合，使得通信网的发展呈现出前所未有的活力和潜力。一方面，通信网中程控交换技术不断开拓新技术、新业务，形成智能通信网的结构与组织模式，以满足信息社会的需求，这是当前程控交换通信网发展的一大趋势；另一方面，原有程控交换通信网机型，虽然都按国际标准设计，但仍有较大差异，在各类程控交换网互联互通上、在网间互操作以扩大联网的通信功能上，存在很多问题。程控交换机上所运行的信令系统是任何通信网的神经系统，它是通信过程得以实现的基础。通话能建立及维持，数据能在网络中传送，必须有必要的信令控制传递和交换过程，使网络作为一个整体而正常运行，才能有效地完成用户之间的通信。无论是现在的电话网、ISDN网、公用数据网以及未来的智能网都离不开信令系统的可靠运转。
　　目前，电话网中所采用的信令系统种类繁多，目前仍在使用的CCITT所建议的信令方式就有随路信令方式No.4、No.5、No.5bis、R1、R2及共路信令方式No.6、No.7。我国针对本国实际情况，参照国际标准，加以修改和补充，制定了一套本国的信令系统，如中国1号随路信令系统和新近的功能完备的No.7共路信令系统。由于我国电话网发展不平衡，在部分地区中1号随路信令仍旧占多数，而且部分地区为保证电话网的通信安全，保留了No.1信令路由作为迂回路由，这都给电话网的可靠运行带来很大困难，即使是同种信令方式也有新老技术规范之分。这样一来，在目前的通信网中必然存在不同信令系统以及同种系统、不同规范之间的互联互通问题。当然，在现有通信网中采用新技术，购置新设备可以解决这一问题，如上海贝尔S1240交换机即可实现No.1与No.7信令系统的互联互通，但是，鉴于目前中国国情，还没有完全更新设备的经济实力。所以，需要在以最小代价和尽可能保护现有资源的前提下，对原有网络进行技术改造，使其达到可互联互通与可操作，从而能扩大通信功能和增加通信新业务种类，以及建立通信网与计算机网互联互通等新技术，以满足各种需求，达到既提高通信网能力，又节省资金和获取经济效益的目的。因此，在此比较长的过渡时期，我们提出了一种基于软件方法的实现不同信令系统信令相互转换的通用方案。由于用户线信令转换比较简单，所以本文主要是针对程控交换机间中继线信令的配合进行探讨。
　　本文第二部分简要介绍了随路与共路信令的基本特性。第三部分给出了解决方案。第四部分列出了实例进行了验证。第五部分为结论。
2 随路信令与共路信令
2.1 随路信令方式
　　(1)控制信令全部或部分在话音信道上传送，信令的传输处理与其服务的话路严格对应、关联；
　　(2)局间信令为线路信令和多频记发器信令(MFC)。多频记发器信号是采用多频编码、双向互控、端到端的传送方式。
2.2 共路信令方式
　　(1)传输通道与话路分开，将若干条电路的信令集中一条公共数据链路上传送；
　　(2)采用时分方式共享一条公共信道信令链路，信令消息单元格式统一。
2.2.1 No.7共路信令方式的功能结构及功能级划分
　　No.7信令方式由MTP(消息传递部分)+UP(用户部分)构成，MTP包括信令网管理、信令消息处理、信令链路功能、信号数据链路等四个层次，UP分为TUP(电话用户部分)、DUP(数据用户部分)，ISUP(综合业务网用户部分)、TCAP(事物处理能力应用部分)等几类。其中，UP为第四级用户级，为用户提供服务。
　　MTP包含以下三级，即第三级信令网功能级、第二级信令链路控制级及第一级信令链路数据级。
2.2.2 No.7信令方式中电话用户部分(TUP)
　　TUP部分是话路网和信令网间的重要的功能接口部分。对电话呼叫接续控制的信号消息进行生成、加工和处理。基本功能是：
　　。根据交换局呼叫连续控制的需要产生并处理相应的信号消息；
　　。执行呼叫所需的信号功能和程序，完成电话呼叫的建立、监视和释放控制。
　　本文主要集中在TUP的互联互通的实现上，并在此研究基础之上，将扩展到其它的用户部分。
3 设计方案
　　目前国际上的信令标准No.4，No.5，No.5bis，R1，R2及中国1号信令都是随路信令，而No.6，No.7为共路信令。如果有M种随路信令和N种共路信令，为每一对信令都设计一个转换程序，将需要C(M+N，2)个程序，方案比较死板，不便于扩充。而且，在随路与共路信令系统之间并非一一对应关系，某一部分信令为一一对应，某一部分为多对一，而有部分共路信令则无随路信令与之对应，这些都是需要考虑的因素。于是，我们需要提取随路与共路两者共同特征，加以形式化，并建立功能对应子集。而后针对每一具体系统，只需编制一个较小的翻译程序将其映射至相应通用模型，这样所需编制的程序只有M+N+l个，设计框图如图1所示。

图1　信令转换模型
　　我们发现：针对现有的信令系统，可以归纳为如下8种功能子集(为简便起见，我们参照中国1号随路信令及No.7号共路信令建立如下模型)，这些功能涵盖了现有信令系统的基本特征：
　　(1)呼叫建立；
　　(2)被叫地址信息；
　　(3)主叫用户类别信息；
　　(4)特殊信息，如：来话国际呼叫显示，卫星链路控制，导通检验控制，回声抑制控制等；
　　(5)地址证实信息；
　　(6)被叫用户状态信息；
　　(7)应答信息(接通以后，监视信息)；
　　(8)呼叫释放。
　　对于随路信令归纳成以下子集：
　　(1)呼叫发起：_occupy：线路信令，对应于各类占用信令，前向；
　　(2)被叫地址信息：_addnum：地址数字信号0~9，记发器信令，前向；
　　(3)主叫用户信息：_callertype：主叫类别，记发器信令，前向；_sendertype：发端业务类别，记发器信令，前向；
　　(4)传送特殊信息：无；
　　(5)地址证实信息：_Affirm：证实，后向；
　　(6)被叫用户状态信息(接通之前)：_calleestatus：证实，后向；
　　(7)应答信息(接通以后)：_backreply：被叫摘机，后向；_hangup：被叫挂机，后向；_releaseguard：释放监护，后向；_asktosend：请发码，后向；
　　(8)呼叫释放：_clear：释放，前向，_reclear：再释放，前向，_operator：话务员业务，前向。
　　共路信令功能子集：
　　(1)呼叫建立：_initiate：含电路建立的各种信息：_additional：若有后续附加信息，则发此信令；
　　(2)被叫地址信息：_address：含国际电话区号或国内电话区号，用户号码；
　　(3)主叫用户类别信息：_cpc；
　　(4)特殊信息：_specialinfo{ ICI：来话国际呼叫显示；SLC：卫星链路；CCC：导通检验；ESC：回声抑制；等等}；
　　(5)地址全证实信息：_addresscomplete；
　　(6)被叫用户状态信息：calleestatus{ SEC交换设备拥塞；CGC电路群拥塞；ADI地址不全；CFL呼叫故障；UNN空号；LOS线路不工作；等等}；
　　(7)被叫应答信息(摘机)：_answer；
　　(8)呼叫释放：_clearback：被叫挂机，后向；_clearup：主叫拆线，前向；_releaseguard：释放监护，后向；等等。
4 实例及实现
　　我们以No.1信令系统和No.7信令系统为例，以Borland C++3.1为编程环境，模拟了两种信令系统之间的转换，转换过程基本上分为以下六种情况：
　　。市话接续信令配合(A)
　　。市话局至发端长话局信令配合(B)
　　。长话局间陆上电路的转接接续配合(C)
　　。终端长话局至市话局的接续配合(D)
　　。长话局间包括卫星电路的转接接续配合(E)
　　。国际局至长话或市话的转接接续配合(F)
　　考虑实际的信令传输过程中，会有两种不同的地址信号的传送方式，即：
　　(1)重叠方式(O)：收到选择路由的必要的地址信号后，立即进行接续。
　　(2)成组方式(E)：收到全部地址信号后，才进行接续。这种方式下，全部地址信号将利用一个初始地址消息一次传送完成。
　　我国国内电话网中，市话局间、长话局/国际局至市话局、市话局至长话局的半自动接续(H)一般采用成组方式，在市话至长话/国际局自动接续(U)、长话局间、长话与国际局间接续时，一般采用重叠地址信号传送方式。这在实际实现信令系统的配合当中是需要考虑的因素。组合关系如图2所示。

图2　信令配合局间方式
　　智能转换模块的工作流程大致如图3所示。

图3　智能转换模块工作流程
　　现以发端市话―发端市话接续，及发端市话―发端长话为例，其中No.1信令线路信令对应关系较为明确，转换较为容易，而对于记发器信令则因为非一一对应，如某些No.7号信令所表示的信息含义在No.1信令中无对应的信令，这些需要根据实际电路情况加以设置，而某些No.1信令在No.7信令系统中被合并为某一个信令，这也要加以映射。转换过程分别如图4、图5所示。

图4　发端市话―发端市话（AE）

图5　发端市话―发端长话（BO）
　　在程序中由用户根据实际电路设置转换模块的工作方式，是市市话局间、市长话局间，还是长长话局间等等。为方便起见，我们假定信号链路功能级和数据链路功能级是透明的，这样不必考虑SS7的MTP部分的具体构造。因为主要针对TUP，所以重点放在7号信令电话消息信号单元中SIF(电话信号信息)部分。为此，定义了如下结构：
//Telephone Message Signaling Unit
struct MSU_TUP
{//unsigned char has 8 bits
unsigned char F; //8 bits
unsigned char BSN_BIB; //7 bits+1 bits
unsigned char FSN_FIB; //7 bits+1 bits
unsigned char LI_fillbits; //6 bits+2 bits
unsigned char SIO; //8 bits
struct class_TUP_SIF SIF; //8n(n>=2)bits dealed by TUP?/P> 
//Telephone Signaling Message
unsigned int CK; //16 bits
};
//Telephone signal information
struct class_TUP_SIF
{//Telephone sign
unsigned char DPC[3]; //DPC 24 bits(destination signal point code)
unsigned char OPC[3]; //OPC 24 bits(source signal point code)
unsigned int CIC; //CIC 12 bits(the circuit between 
//DPC&OPC)+fillbits 4 bits
unsigned char H1H0; //8bits recognize message groups
//4bits recognize specific signal in a message group
char *S_info;//8n bits signaling information
};
5　结束语
　　本文针对目前国际及国内通信网中信令系统的现状，提出了一种过渡时期的改造方案，设计了一种通用的信令转换模型，并在此基础上以应用最为广泛的中国1号随路信令及国际NO.7号信令为例，部分加以实现，这对于今后的现有通信网的改造，对于在现有PSTN中，利用已有的资源，发展新的业务及提供新的功能，实现多媒体信息的传输，有很实际的意义。
刘浩力（上海铁道大学计算机科学系 上海 200331）　
李磊（上海铁道大学计算机科学系 上海 200331）　
施鸿宝（上海铁道大学计算机科学系 上海 200331）
参考文献
1，纪 红. 7号信令系统. 北京：人民邮电出版社, 1995
2，张仲文. 电信网最新控制技术-现代电话网NO.7信号方式. 北京：电子工业出版社, 1995
3，奚旭镛, 陶美君等. 通信网的信令与接口. 北京：电子工业出版社, 1994
4，杨晋儒, 吴立贞. NO.7信令系统技术手册. 北京：人民邮电出版社, 1997
5，孙震强, 高振明, 孙瑞芳等. 电信网与电信系统. 北京：人民邮电出版社, 1996
6，韩卫东. 程控交换机原理及维护. 北京：电子工业出版社, 1997
收稿日期：1999年7月26日
