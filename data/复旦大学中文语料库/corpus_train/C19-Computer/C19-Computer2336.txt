计算机研究与发展
JOURNAL OF COMPUTER RESEARCH AND DEVELOPMENT
1999　Vol.36　No.7　P.819-823



一种轮询系统的平均周期时间
刘强　张中兆　张乃通
摘　要：文中首先介绍了非抢先优先权队列门限服务轮询系统的操作原则，在此基础上，通过对系统嵌入马尔可夫链，构造队列母函数及Laplace-Stieltjes变换，求解出了系统的平均周期时间，并且通过计算机仿真验证了公式的正确性.
关键词：非抢先优先权队列轮询系统, 门限服务, 平均周期时间, ATM, 母函数, Laplace-Stieltjes变换
分类号：TP393
MEAN CYCLIC TIME OF A POLLING SYSTEM
LIU Qiang
(Communication Research Center, Harbin Institute of Technology, Harbin 150001)
ZHANG Zhong-Zhao
(Communication Research Center, Harbin Institute of Technology, Harbin 150001)
ZHANG Nai-Tong
(Communication Research Center, Harbin Institute of Technology, Harbin 150001)
Abstract：The principle of the no interrupted priority queue polling system with gated service is introduced in this paper. By using the imbedded Markov chain method and the generating function of queue length and Laplace-Stieltjes transform, the mean cyclic time in statistical equilibrium with symmetry distribution is obtained. The formula is tested and verified by simulation.
Key words：no interrupted priority queue polling system, gated service, mean cyclic time, ATM, generating function, Laplace-Stieltjes transform▲
　　轮询系统是代表线路共享和资源共享相结合的最简单方法.这种网络采用集中控制式网络类型，对网络控制能力强，每个队列均有访问信道的机会，可达到较高的延迟要求，从而大量应用于各种总线系统及ATM交换机中.总线型ATM交换机，由总线控制器控制各输入/输出队列的轮询操作，具有结构简单，扩展能力强的突出优点，目前广泛应用于ATM交换机中［1～3］.轮询系统基本工作过程为：系统内有一个中央控制器担任对每一个队列的探询工作，探询按顺序进行，两个队列之间的探询时间称为走步时间，接受探询的队列获得访问信道的机会，如果该站有要发送的数据，它可以利用信道的全部数据速率将数据送往目的地；否则，中央控制器继续对下一个队列探询［4］. Kumar利用线性规划计算方法处理排队网络模型，解决了后来具有高优先权顾客轮询排队网络及不同顾客采用不同服务时间轮询排队网络的性能评价，得出了网络性能的上下限图表，得出网络性能近似结果［5］.在Yang利用矩阵分析的方法计算确定了带有优先级的TDM系统的性能上下界，这种方法也没有得出优先权系统的性能表达式［6］.Hashida利用概率母函数的方法通过嵌入马尔可夫链对基本的轮询系统做了详尽的精确分析，得出了系统性能的显式表达结果［7］.在轮询系统中，平均周期时间是系统性能评价的重要指标，本文参照Hashida采用的方法，利用内嵌马尔可夫链的方法求解了非抢先优先权队列门限服务轮询系统对称分布的平均周期时间.
1　非抢先优先权队列门限服务轮询系统操作原则及变量定义
　　系统由一个中心队列和N个一般队列构成，按轮询方式进行操作.中心队列具有非抢先优先权，即当中心队列有信息要发送时，如果此时服务员正好完成一个一般队列的服务，则立即对中心队列进行服务；否则，等待服务员完成当前队列的服务后，立即对中心队列进行服务.服务员对队列的服务采用门限型，即服务员只对服务员到达该队列时存在于队列内的信息进行服务，服务过程中到达的信息在下一次轮询到该队列时进行服务.这就是非抢先优先权队列轮询系统的操作原则.
　　服务员一般按1，2，…，N队列进行轮询服务，1队列在N队列之后接受服务.若中心队列有顾客，则在当前队列服务完成之后，不需走步时间优先服务中心队列，然后继续进行轮询操作；或者目前服务员恰好完成一个队列的轮询操作，则立即对中心队列进行服务，然后继续进行轮询操作.每个队列的排队容量为无限大，进入队列的顾客按先来先服务的原则进行服务.对于任一队列i (i=1,2,…,N)，输入为泊松过程，参数为λi，服务时间为一般分布，分布函数为Hi(x)，均值为hi，业务量强度为ρi，ρi=λihi ；中心队列输入为泊松过程，参数为λC，服务时间为一般分布，分布函数为HC(x)，均值为hC，业务量强度为ρC，ρC=λChC.从队列i到i+1的走步时间为一般分布，分布函数为μi(x).我们定义下面变量：
　　C　代表中心队列；
　　μi　从队列i到i+1的走步时间，i=1,2,…,N；
　　vi(τ)　在时间τ内队列i到达的顾客数，i=1,2,…,N,C；
　　gi(j1,j2,…,jN,jC)　在平衡状态下，当服务员到达队列i(i=1,2,…,N)时，在队列k(k=1,2,…,N,C）有jk个顾客等待服务的概率.
　　定义下面母函数：
　　(1)
2　队列长度的分布
　　在一般队列中，假设服务员到达某队列的时刻为…，tn，tn+1,…（这里不包括到达中心队列的时刻），有…<tn<tn+1<…，将T定义为序列{tn}.
　　我们定义下面的随机变量： 
　　εn(i)为在时刻tn队列i(i=1,2,…,N,C)中的顾客数；
　　εn为在时刻tn服务员所在的队列号，εn∈(1,2,…,N).
　　在时刻tn,系统状态可用下面的变量描述：
（εn,εn(1),εn(2),…,εn(N),εn(C)）
因此，系统的状态空间为：
I={(i, k1 ,k2, …, kN ,kC)｜ i=1,2,…,N， kj =0,1,2,…， j=1,2,…,N,C }　　(2)
　　所以状态（εn,εn(1),εn(2),…,εn(N),εn(C)）的转移概率构成一个不可约、非周期的马尔可夫链，因此我们有极限概率：
　　(3)
　　这里，对于所有的jk≥0 ( k=1,2,…,N,C )，有两种情况：
　　(1) gi(j1,j2,…,jN,jC)>0，马尔可夫链是各态历经的，系统达到稳定状态；
　　(2) gi(j1,j2,…,jN,jC)=0，马尔可夫链各个状态是滑过态或零常返态.
　　存在稳定状态的必要条件是：
　　　　(4)
其中ρi=λihi,ρC=λChC,i=1,2,…,N. hi是队列i(i=1,2,…,N)的平均服务时间，hC为中心站的平均服务时间，下面的分析建立在式(4)的基础上.
　　假设在时刻tn+1服务员到达队列i+1，则tn是服务员最近一次到达队列i的时刻，其中tn,tn+1∈T.设τi为在队列i(i=1,2,…,N)的总服务时间（在tn与tn+1之间）；μi为从队列i到i+1的走步时间，μi-1为从队列i-1到i的走步时间；FC(x)为中心队列在开始接受服务时，中心队列有x个顾客，当中心队列服务完成时的服务时间.
　　因此，我们有：

　　一般说来，对于在时间t内以λ速率到达的泊松过程，顾客个数的母函数有
　　　(6)
其中，F*(s)为t的分布函数的Laplace-Stieltjes变换.
　　服务员到达队列i时，队列i有εn(i)个顾客，因此τi分布函数的Laplace-Stieltjes变换为下式，
｛H*i(s)｝εn(i)　　　　(7)
其中*表示Laplace-Stieltjes变换［8］.
　　考虑到vi(i=1,2,…,N)和μi(i=1,2,…,N)的相互独立性，利用公式(5)～(7)，我们得到P(i+1,εn+1(1),εn+1(2),…,εn+1(N),εn+1(C))的母函数：
　
　　在上式中设:

　　在式（8）中，令n→∞，系统趋于平衡状态，因此有，
　(9)
这里，Gi(x1,x2,…,xN,xC)的函数关系通过上面迭代公式表示出来了，但是我们还是推导不出其显示表达式.
　　设gi(j)(j=1,2,…,N,C)为服务员到达队列i时队列j的平均长度，gi(j)通过下式进行计算：
　　　(10)
　　由式（9），当i =1,2,…,N时，我们得到：
Gi(1,1,…,1,1)=k(常数)，i=1,2,…,N
(11)
　　在式（9）中，对于xj进行微分，并且将xl→1 (l=1,2,…,N,C), 我们得到：

　　对于式（12），令i=j,j+1,i-1,i累加有：
　　(13)
　　其中当j>i时有，
　　在式（13）中，令i=j-1有：
　　(14)
　　当系统是对称分布时，即有λi=λ,μi(x)=μ(x),Hi(x)=H(x),系统达到稳定状态时有：gi+1(C)=gi(C) (i=1,2,…,N).
　　设gi(C)=g(C) (i=1,2,…,N), gi(i)=g(i=1,2,…,N)，因此由式（12）得：
　　　(15)
　　将式（15）代入式（14）中，我们有：
　　(16)
式（16）即为服务员到达队列k (k=1,2,…N)时一般队列k (k=1,2,…N)的平均长度.
3　平均周期时间
　　每次服务员对中心站的平均服务时间为：hC［g(C)+λChg］.因此，系统的平均周期时间为：
TC=Nhg+Nμ+NhC［g(C)+λChg］
　　将式（15）、（16）代入上式中，系统平均周期时间为：
　　　(17)
　　在上式中，N为轮询系统一般站点的个数，μ为走步时间的均值，ρC为中心队列的业务量强度，ρ为一般队列的业务量强度.
4　理论计算与仿真实验
　　在以上分析结果的基础上，我们利用Candence公司BONeS仿真平台，按照系统的操作原则构建此系统的仿真模型，进行仿真实验.理论计算和仿真实验采用相同的系统参数：一般队列为对称分布，输入均为泊松过程，服务时间和走步时间均为一般分布，μ=0.0006，h=0.0001，ρC /ρ分别取值1、2、3、4，系统总业务量强度ρ总=ρC +Nρ，中心队列和一般队列按比例分配业务量强度，一般队列个数分别为N=10和N=50进行理论计算和仿真，结果如表1和表2所示.
表1　N=10理论计算和仿真结果

ρ总理论值仿真结果
ρC /ρ=1ρC /ρ=2ρC /ρ=3ρC /ρ=4
0.100006.6667E-36.6800E-36.6796E-36.6685E-36.6757E-3
0.200007.5000E-37.5121E-37.5119E-37.5122E-37.5155E-3
0.300008.5714E-38.5700E-38.5706E-38.5711E-38.5721E-3
0.400001.0000E-29.9937E-39.9898E-39.9878E-39.9867E-3
0.500001.2000E-21.1989E-21.1983E-21.1983E-21.1976E-2
0.600001.5000E-21.4978E-21.4934E-21.4978E-21.4985E-2
0.700002.0000E-21.9993E-21.9981E-21.9946E-21.9956E-2
0.800003.0000E-22.9978E-22.9983E-22.9948E-22.9952E-2
0.900006.0000E-25.9985E-25.9979E-25.9944E-26.0068E-2
0.950001.2000E-11.2011E-11.2029E-11.2013E-11.2023E-1


表2　N=50理论计算和仿真结果

ρ总理论值仿真结果
ρC /ρ=1ρC /ρ=2ρC /ρ=3ρC /ρ=4
0.100003.3333E-23.3325E-23.3326E-23.3323E-23.3313E-2
0.200003.7500E-23.7489E-23.7510E-23.7480E-23.7504E-2
0.300004.2857E-24.2832E-24.2796E-24.2866E-24.2789E-2
0.400005.0000E-24.9917E-25.0101E-24.9898E-24.9897E-2
0.500006.0000E-26.0053E-25.9919E-25.9902E-25.9900E-2
0.600007.5000E-27.4716E-27.4694E-27.5188E-27.4711E-2
0.700001.0000E-19.9639E-29.9880E-29.9978E-21.0021E-1
0.800001.5000E-11.4929E-11.4988E-11.5101E-11.4986E-1
0.900003.0000E-12.9885E-12.9790E-13.0165E-12.9893E-1
0.950006.0000E-16.0243E-15.9869E-15.9457E-16.0523E-1


　　从仿真结果可以看出，一般队列个数分别为N=10和N=50，当中心队列和一般队列具有各种不同的业务量强度时，系统的仿真结果和理论计算值相符. 
5　结　论
　　我们通过对非抢先优先权队列门限服务轮询系统内嵌马尔可夫链的方法，利用求解母函数导出了系统的平均周期时间.可以看出平均周期时间是与站点数及走步时间成正比的，与1和每个队列（一般队列和中心队列）业务量强度之和的差成反比，如式（17）所示.仿真实验验证了理论分析的正确性.■
基金项目：本课题得到国家“八六三”高技术发展计划资助(项目编号863-2-4-8-2).
作者简介：刘强，男，1971年生，博士研究生，目前主要从事空间站内部通信系统的研究.
　　　　　张中兆，男，1951年生，教授，博士生导师.主要研究方向为移动通信、C3I理论应　　　　　　用、无线数据网、ATM网络、空间通信.
　　　　　张乃通，男，1934年生，现为哈尔滨工业大学通信技术研究所所长，教授，博士生　　　　　　导师，主要研究方向为无线数据网、ATM网络、移动通信、卫星通信.
作者单位：刘强（哈尔滨工业大学通信技术研究所　哈尔滨　150001）
　　　　　张中兆（哈尔滨工业大学通信技术研究所　哈尔滨　150001）
　　　　　张乃通（哈尔滨工业大学通信技术研究所　哈尔滨　150001）
参考文献：
［1］Kesidis G. ATM Networks Performance. Boston: Kluwer Academic Publishers, 1996. 6～47
［2］Goralski W J. Introduction to ATM Networking. New York: McGraw-Hill Inc, 1995. 128～189
［3］Minzer S E. Broadband ISDN and asynchronous transfer mode. IEEE Communication Magazine， 1989, 27(9): 17～24
［4］Joseph L P， O'Reilly J P. Performance Ananysis of Local Computer Networks. Reading: Addison-Wesley Publishing Company，1986
［5］Kumar P R. A tutorial on some new methods for performance evaluation of queueing networks.IEEE Journal on Selected Areas in Communication, 1995，13(6): 970～980
［6］Yang O W, Mark J W. Queueing analysis of an integrated services TDM system using a matrix-analytic method. IEEE Journal on Selected Areas in Communication, 1991, 9(1): 88～94
［7］Hashida O. Analysis of multiqueue. The Electrical Communication Laboratories NTT, 1972，20(3-4): 189～199
［8］Cooper R B， Murray G. Queues served in cyclic order. The Bell System Technical Journal, 1969, 3: 675～689
收稿日期：1998-09-14
修稿日期：1998-12-24
