计算机工程
COMPUTER ENGINEERING
1999年 第25卷 第10期 Vol.25 No.10 1999



一种适于多媒体信息传输的局域网协议
白成林
摘要：为了在现有的局域网中有效地传输多媒体信息，提出一种采用避免冲突开头的多路访问星型高速局域网协议，通过它可充分利用网络的传输能力，有效地传输诸如视频、音频、图象、图形、文本、动画等媒体信息。
关键词：多媒体通信；局域网；协议
A LAN Protocol Suitable for Transmission of Multimedia Information
Bai Chenglin
(Department of Communication Engineering of Liaocheng Teachers College,Liaocheng252059)
【Abstract】In order to transmit multimedia information on current Local Area Network efficiently,a new protocol called the colision avoidance broadcast star(CABS)network protocols for high speed LAN is proposed in this paper.Adopting this protocol,the multimedia information system can transmit efficiently video,audio,image,graphics,text and animation on a unique LAN.
【Key words】Multimedia communication;LAN;Protocol
　　多媒体通信始终是多媒体领域中的重要研究方向。目前，研究主要集中在两个方面：新型网络以及对高层协议进行修改和扩充。为了便于多媒体信息的传输，很多机构对新型网络进行了研究，其中最引人注目的是基于异步传输模式(ATM)的宽带综合业务数据网(B-ISDN)。新型网络一般以光纤为传输介质，以快速交换技术为传输模式，向高层提供几百兆甚至上千兆的可用带宽，使多媒体信息的传输成为可能。而对高层协议的扩充则是基于特定的应用。
　　为了实现大规模传输多媒体信息，对于现有的局域网，人们提出各种各样的混合协议，其基本思想是使网络在轻载时保持随机信道协议传输延迟小的优点，而在重载时又具有控制信道协议所具有的高通量；所采用的方法是通过利用一部分信道容量来建立站间传输的规划，以减少或避免冲突。不过，上述方法存在一种不可避免的部分信道损失，使重载时信道利用率下降，延迟增加。为了克服其缺点，Albanese提出了采用硬件避免冲突开关的方法[1]。轻载时开关不起作用，网络按随机协议进行；重载时，利用开关使信道始终只被一个站动态占用，从而避免了冲突的产生。但对于这种方法，如果在开关电路动作时间内有一个站以上的包到达，仍会产生冲突，虽然发生冲突的概率较小，但是随着传输速率的增加，冲突概率迅速增加，而且其包的重发采用非延迟重发方式，一旦发生冲突，会不断冲突下去，使系统锁死。在对Albanese提出的开关电路作了改进后，设计了一种能够完全避免冲突的新型开关结构，给出了电子开关和光子开关的实现方案，对该结构的网络协议作了描述和性能分析，并与CSMA/CD协议及其它混合协议进行了比较，结果表明该协议优于CSMA/CD和其它许多混合协议。
1　网络结构及协议描述
　　为适应光纤网，网络采用星型结构。整个网络由Ｎ个工作站和一个中央交换节点组成，每个工作站与中央节点均有一条全双工信道相连，并通过用户接口控制器(UIC)连接到中央节点上。用户接口控制器由发送器(T)，接收器(R)，逻辑判决器(C)和开关(S)组成。每个UIC挂到中央节点的内部总线上。中央交换节点的结构如图1所示。总的网络协议是：用户接口电路阻断那些会引起冲突的包，而各站不断重传发送不成功的包，直到发送成功。

图1 中央交换节点的结构示意图
　　・ 站协议
　　(1) 任何一个站准备好信包后立即发送；
　　(2) 发送信包的站等待一个来回传播延迟时间，然后侦听回线；
　　(3) 如果发现发送的包未到达，立即重传该包；
　　(4)否则知道它的包已被开关选中且正在广播整个信包。
　　・ 中央节点协议
　　(1) 所有发送器始终与内部总线接通，进入内部总线的包将被广播到所有的站；
　　(2) 接收器与内部总线连接与否由开关控制；
　　(3) 内部总线有两种状态，即空闲态和忙态。逻辑判决器一直检测总线状态和接收器状态。当总线处于空闲态且无站发送信包时，所有开关处于关闭状态，此时如果有一个信包到达某接收器，判决器立即动作使开关接通，信包直接发至总线，总线从空闲态转入忙态。当被选中的包发送完毕，且此时没有信包到达，总线从忙态转入空闲态，开关断开。
　　(4) 如果在总线忙期有一个信包到达某接收器，判决器将使该开关始终处于关闭状态，信包被阻断；
　　(5) 判决器的响应时间为Tr，如果在Tr内有一个以上信包到达，上述4点协议不能避免冲突；此时判决器根据站的优先次序选通其中一个信包，从而避免冲突的发生。
2　避免冲突开关的设计
2.1 电子开关
　　以上中央节点协议可由图2所示的逻辑电路来实现。发送器和接收器作为链路的一部分，可根据不同类型的电缆专门设计。这里重点讨论逻辑判决器。 I1、I4为线路侦听器，当线路忙时输出高电平，闲时输出低电平；I2、I3是D触发器，I2的作用是当总线处于闲期时如果有信包到达，则产生一个"先到"信号，表明本站发送的信包最先到达中央节点，此信号将保持电路I3置1，使开关接通。当信包发送完毕，Q4输出高电平，将I3置0，开关断开。在总线忙期Q4为高电平，将I2 阻断，此时即使有信包到达也不会产生"先到"信号，从而使开关始终处于断路状态。

图2 电子开关结构
　　如果在判决器动作时间内有一个以上信包到达中央节点，I7、I8将检测到冲突，O2输出高电平，此时将根据SEI电平决定是否关闭开关。当SEI为低电平时，不允许接通开关，此时O3输出高电平，将I3置0，开关断开；只有SEI为高电平时，开关才能保持接通状态。SEI和SEO的逻辑关系为：a)SEI=0必有SEO=0，b)SEI=1时，如果O2=1，则SEO=0，否则SEO=1。采用图1的接法时，能保证冲突时立即关闭优先级低的开关，只有优先级最高的一个站保持接通。冲突时间很短，只要在信包前面加入几个检测比特，不会破坏有用信息。在非冲突时，SEI和SEO不起作用。图3给出了逻辑电路的时序图。

图3 冲突时被阻断站的逻辑电路时序
2.2 光子开关
　　上述电子开关适用于约为50Mbit/s的电缆局域网。本协议同样可以在高速光纤局域网上实现，其关键是光子开关的设计。采用分布式结构，开关结构如图4所示。组成开关的各部件都是现有技术可实现的。其中S是2×2光纤开关，SP为定向耦合器，RCV为光接收器，其功能是把光比特流变成电比特流，C为逻辑判决器，其结构与电子开关相同。由于光缆只能单向传输，故网络结构与电缆局域网有所不同。

图4 中央节点及光子开关结构
3　性能分析
　　设站数N为有限值。将时间轴分为一系列时间片，单位是长度为最远两站间的传播延迟。每个站只有两种状态：思考态和回储态。在思考态，站在一个时间片内以概率P产生一个新包。如果一个站新产生的包发送时未被开关选中，则转入回储态。处于回储态的站直到存储的包成功发送完毕才会产生新包，此时返回思考态。
　　中央节点有两种状态：空闲态和忙态。忙期从开始收到一个信包到把整个信包传送到发送器结束，否则处于空闲期。在忙期到达接收器的所有信包不予接收，直到忙期结束，才开始接收新包或返回空闲态。闲期时间间隔为从忙期结束到有一个包到达。为简化分析，假设闲期间隔恒为定值Td。
　　以整个系统准备好的包数为系统状态，系统有下列状态：(0,1,2,...,N)，其中0为没有准备好的包，i(1<i<N)表示系统有i个准备好的包，且中央节点处于忙期。根据上述模型，系统状态的吸收Markov链如图5所示。

图5 系统状态转换图
　　假设：
　　(1) 所有站的活动相互独立；
　　(2) 包长固定，恒为T个时间片；
　　(3) 闲期时间间隔为Td。
　　定义　　Pb=Prob[在忙期有一个包准备好]=1-(1-P)T+1状态转移概率可用下列式子表示：
　　Pr(0,0)=Prob[在单位时间内有j个站准备好]
　　=(Nj)Pj(1-P)N-1　　1≤j≤N
　　Pr(i,j)=Prob[在忙期有j-(i-1)个站准备好]
　　=(N-1j+1-i)Pbj+1-i(1-Pb)N-j-1　　0≤i-1≤j≤N
　　　记Π=[π(0),π(1),...,π(N)]为稳定概率矢量，Ｐ为转移概率矩阵，根据Π=ΠＰ及，可解出稳定概率Π。通量为：

　　Nr=系统中准备好发送的包个数的平均值

　　由Little公式可得归一化平均延迟：
　　把模型分析结果和文献[2]中对Ethernet分析结果进行比较。图6给出了通量与包产生概率的关系，计算时取Ｎ＝20,分别取α＝0.1，α＝0.05(α为传播延迟与包时间之比)。图7给出了归一化延迟和通量的关系。在轻载时，协议的延迟与Ethernet完全相同，而重载时通量比Ethernet高出许多，且延迟远比Ethernet小。另外，随着负载的进一步加重，Ethernet的通量因冲突增加而逐渐下降，但协议始终能保持很高的通量。可见，协议的性能远优于Ethernet，且有很宽的动态范围。

图6 通量与包产生率的关系

图7 归一化延迟与通量的关系
　　对文献[3,4]中提出的几种混合协议，并与Ethernet进行了比较，结果发现轻载时延迟高于Ethernet，重载时通量略低于协议。因此，协议优于这些混合协议。
基金项目：国家自然科学基金和山东省自然科学基金项目
作者简介：白成林（1965～），男，副教授，主要研究方向：多媒体技术、计算机通信
作者单位：山东聊城师范学院通信工程系，聊城252059
参考文献 
1 Albanese A.Star Network with Collision-avoidance Circuits.BallSystem Tech. J.,1993,62(3)
2 ChenJ S J,Li V O K.Reservation CSMA/CD:A Multiple Access Protocol for LAN's.IEEE J.On Select.Areas in Commun.,1989, 17(2)
3 Chamtac I,Franta W R.Message-based Priority Access to Local Networks.Comput.Commun.,1996-03
4 Closs F,Lee R P.A Multi-star Broadcast Network for Local Area Communication.Local Networks for Computer Communication,1997
收稿日期：1999-02-13
